!function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t,this._authKey=n}var n,o;return n=e,o=[{key:"getAllCards",value:function(){return this._sendRequest("GET","/cards")}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return this._sendRequest("POST","/cards",{body:JSON.stringify({name:t,link:n})})}},{key:"deleteCard",value:function(e){return this._sendRequest("DELETE","/cards/"+e)}},{key:"likeCard",value:function(e){return this._sendRequest("PUT","/cards/likes/"+e)}},{key:"dislikeCard",value:function(e){return this._sendRequest("DELETE","/cards/likes/"+e)}},{key:"getUserInfo",value:function(){return this._sendRequest("GET","/users/me")}},{key:"updateUserInfo",value:function(e){var t=e.name,n=e.about;return this._sendRequest("PATCH","/users/me",{body:JSON.stringify({name:t,about:n})})}},{key:"updateUserAvatar",value:function(e){var t=e.avatar;return this._sendRequest("PATCH","/users/me/avatar",{body:JSON.stringify({avatar:t})})}},{key:"_sendRequest",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fetch(this._baseUrl+n,t({method:e,headers:{Authorization:this._authKey,"Content-Type":"application/json"}},r)).then(this._checkResponse)}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("An error occurred: ".concat(e.status," ").concat(e.statusText))}}],o&&r(n.prototype,o),e}(),i=o;function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n,r,o){var i=t._id,a=t.name,u=t.link,c=t.likes,s=t.owner,f=r.handleImageClick,h=r.handleLikeClick,d=r.handleRemoveClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_cardSelector",".card"),l(this,"_titleSelector",".card__title"),l(this,"_imageSelector",".card__image"),l(this,"_likeButtonSelector",".card__like-button"),l(this,"_likeCounterSelector",".card__like-counter"),l(this,"_removeButtonSelector",".card__remove-button"),l(this,"_likeButtonActiveClass","card__like-button_active"),this._id=i,this._name=a,this._link=u,this._likes=c,this._owner=s,this._templateSelector=n,this._handleImageClick=f,this._handleLikeClick=h,this._handleRemoveClick=d,this._userId=o}var t,n;return t=e,n=[{key:"generateElement",value:function(){return this._createFromTemplate(),this._setEventListeners(),this._checkPermissions(),this.updateLikes(),this._titleElement.textContent=this._name,this._imageElement.alt=this._name,this._imageElement.src=this._link,this._cardElement}},{key:"removeElement",value:function(){this._cardElement.remove()}},{key:"updateLikes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.likes;this._likes=t||this._likes,this._isLiked()?this._markLiked():this._markDisliked(),this._likeCounterElement.textContent=this._likes.length}},{key:"_createFromTemplate",value:function(){this._cardElement=document.querySelector(this._templateSelector).content.querySelector(this._cardSelector).cloneNode(!0),this._titleElement=this._cardElement.querySelector(this._titleSelector),this._imageElement=this._cardElement.querySelector(this._imageSelector),this._likeButtonElement=this._cardElement.querySelector(this._likeButtonSelector),this._likeCounterElement=this._cardElement.querySelector(this._likeCounterSelector),this._removeButtonElement=this._cardElement.querySelector(this._removeButtonSelector)}},{key:"_setEventListeners",value:function(){var e=this;this._imageElement.addEventListener("click",this._handleImageClick),this._likeButtonElement.addEventListener("click",(function(){return e._handleLikeClick(e._id,e._isLiked())})),this._removeButtonElement.addEventListener("click",(function(){return e._handleRemoveClick(e._id)}))}},{key:"_checkPermissions",value:function(){this._owner._id!==this._userId&&this._removeButtonElement.remove()}},{key:"_isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"_markLiked",value:function(){this._likeButtonElement.classList.add(this._likeButtonActiveClass)}},{key:"_markDisliked",value:function(){this._likeButtonElement.classList.remove(this._likeButtonActiveClass)}}],n&&a(t.prototype,n),e}(),c=u;function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_backgroundClass","dialogue"),f(this,"_closeButtonClass","dialogue__close-button"),f(this,"_openedClass","dialogue_opened"),this._dialogueElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._handleClickClose=this._handleClickClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._dialogueElement.classList.add(this._openedClass),this.setEventListeners()}},{key:"close",value:function(){this._dialogueElement.classList.remove(this._openedClass),this.removeEventListeners()}},{key:"setEventListeners",value:function(){document.addEventListener("keydown",this._handleEscClose),this._dialogueElement.addEventListener("click",this._handleClickClose)}},{key:"removeEventListeners",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._dialogueElement.removeEventListener("click",this._handleClickClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleClickClose",value:function(e){(e.target.classList.contains(this._backgroundClass)||e.target.classList.contains(this._closeButtonClass))&&this.close()}}])&&s(t.prototype,n),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},m.apply(this,arguments)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function a(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o=".dialogue__submit-button",(r="_buttonSelector")in(n=b(t=i.call(this,e)))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t._buttonElement=t._dialogueElement.querySelector(t._buttonSelector),t}return t=a,(n=[{key:"open",value:function(e){this._confirmationCallback=e,m(g(a.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){m(g(a.prototype),"setEventListeners",this).call(this),this._buttonElement.addEventListener("click",this._confirmationCallback)}},{key:"removeEventListeners",value:function(){m(g(a.prototype),"removeEventListeners",this).call(this),this._buttonElement.removeEventListener("click",this._confirmationCallback)}}])&&p(t.prototype,n),a}(h);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},O.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function j(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),I(P(t=i.call(this,e)),"_hideAfterSeconds",5),I(P(t),"_paragraphSelector",".dialogue__paragraph_primary"),I(P(t),"_counterSelector",".dialogue__counter"),t._paragraphElement=t._dialogueElement.querySelector(t._paragraphSelector),t._counterElement=t._dialogueElement.querySelector(t._counterSelector),t}return t=a,(n=[{key:"open",value:function(e){var t=this;O(L(a.prototype),"open",this).call(this),this._clearCounter(),this._paragraphElement.textContent=e,this._counterElement.textContent=this._hideAfterSeconds,this._intervalId=setInterval((function(){t._counterElement.textContent-=1}),1e3),this._timeoutId=setTimeout((function(){return t.close()}),1e3*this._hideAfterSeconds),console.error(e)}},{key:"close",value:function(){O(L(a.prototype),"close",this).call(this),this._clearCounter()}},{key:"_clearCounter",value:function(){this._intervalId&&clearInterval(this._intervalId),this._timeoutId&&clearTimeout(this._timeoutId)}}])&&S(t.prototype,n),a}(h);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=A(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(this,arguments)}function A(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function D(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(r);if(o){var n=F(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),V(U(n=i.call(this,e)),"_formSelector",".dialogue__form"),V(U(n),"_buttonSelector",".dialogue__submit-button"),n._formElement=n._dialogueElement.querySelector(n._formSelector),n._buttonElement=n._dialogueElement.querySelector(n._buttonSelector),n._submissionCallback=t,n._handleFormSubmission=n._handleFormSubmission.bind(U(n)),n}return t=a,(n=[{key:"close",value:function(){T(F(a.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setInputValues",value:function(e){for(var t in e)this._formElement.elements[t]&&(this._formElement.elements[t].value=e[t])}},{key:"setLoadingState",value:function(e){this._buttonElement.textContent=e?"Saving...":"Save"}},{key:"setEventListeners",value:function(){T(F(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",this._handleFormSubmission)}},{key:"removeEventListeners",value:function(){T(F(a.prototype),"removeEventListeners",this).call(this),this._formElement.removeEventListener("submit",this._handleFormSubmission)}},{key:"_handleFormSubmission",value:function(e){e.preventDefault(),this._submissionCallback(this._getInputValues())}},{key:"_getInputValues",value:function(){var e=Array.from(this._formElement.elements),t={};return e.forEach((function(e){t[e.name]=e.value})),t}}])&&q(t.prototype,n),a}(h);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=H(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},G.apply(this,arguments)}function H(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function M(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Q(r);if(o){var n=Q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return M(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),W($(t=i.call(this,e)),"_imageSelector",".dialogue__image"),W($(t),"_captionSelector",".dialogue__caption"),t._imageElement=t._dialogueElement.querySelector(t._imageSelector),t._captionElement=t._dialogueElement.querySelector(t._captionSelector),t}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;G(Q(a.prototype),"open",this).call(this),this._imageElement.alt=t,this._imageElement.src=n,this._captionElement.textContent=t}}])&&J(t.prototype,n),a}(h);function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Z=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=t,this._validationSettings=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){var e=this;this._analyzeForm(),this._toggleSubmitButtonState(),this._inputsList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleSubmitButtonState()}))})),this._formElement.addEventListener("reset",(function(){return e._makeSubmitButtonDisabled()}))}},{key:"_analyzeForm",value:function(){this._inputsList=Array.from(this._formElement.querySelectorAll(this._validationSettings.inputSelector)),this._submitButtonElement=this._formElement.querySelector(this._validationSettings.submitButtonSelector)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._getInputErrorElement(e);e.classList.add(this._validationSettings.inputErrorClass),n.classList.add(this._validationSettings.errorVisibleClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._getInputErrorElement(e);e.classList.remove(this._validationSettings.inputErrorClass),t.classList.remove(this._validationSettings.errorVisibleClass),t.textContent=null}},{key:"_getInputErrorElement",value:function(e){var t=this._validationSettings.inputErrorSelector.replace("%formId",this._formElement.id).replace("%inputName",e.name);return this._formElement.querySelector(t)}},{key:"_toggleSubmitButtonState",value:function(){this._hasInvalidInput()?this._makeSubmitButtonDisabled():this._makeSubmitButtonActive()}},{key:"_hasInvalidInput",value:function(){return this._inputsList.some((function(e){return!e.validity.valid}))}},{key:"_makeSubmitButtonActive",value:function(){this._submitButtonElement.classList.remove(this._validationSettings.inactiveButtonClass),this._submitButtonElement.disabled=!1}},{key:"_makeSubmitButtonDisabled",value:function(){this._submitButtonElement.classList.add(this._validationSettings.inactiveButtonClass),this._submitButtonElement.disabled=!0}}])&&Y(t.prototype,n),e}(),ee=Z;function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._containerElement=document.querySelector(t),this._rendererCallback=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._rendererCallback(e)}))}},{key:"addElementFirst",value:function(e){this._containerElement.prepend(e)}},{key:"addElementLast",value:function(e){this._containerElement.append(e)}}])&&te(t.prototype,n),e}();function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var oe=function(){function e(t){var n,r=t.nameSelector,o=t.aboutSelector,i=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=void 0,"_id"in this?Object.defineProperty(this,"_id",{value:n,enumerable:!0,configurable:!0,writable:!0}):this._id=n,this._nameElement=document.querySelector(r),this._aboutElement=document.querySelector(o),this._avatarElement=document.querySelector(i)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{id:this._id,name:this._nameElement.textContent,about:this._aboutElement.textContent,avatar:this._avatarElement.src}}},{key:"setUserInfo",value:function(e){var t=e._id,n=e.name,r=e.about,o=e.avatar;this._id=t||this._id,this._nameElement.textContent=n,this._aboutElement.textContent=r,this._avatarElement.src=o}}])&&re(t.prototype,n),e}(),ie={formSelector:".dialogue__form",inputSelector:".dialogue__form-field",inputErrorSelector:".%formId-%inputName-error",submitButtonSelector:".dialogue__submit-button",inactiveButtonClass:"dialogue__submit-button_disabled",inputErrorClass:"dialogue__form-field_has-error",errorVisibleClass:"dialogue__form-error_visible"};function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=new i("https://around.nomoreparties.co/v1/group-12","190e9486-cf84-4370-aa42-80831152ad82"),fe=new ne(".cards__list",(function(e){return fe.addElementLast(be(e))})),he=new N(".dialogue_type_card-add",(function(e){he.setLoadingState(!0),se.addCard(e).then((function(e){fe.addElementFirst(be(e)),he.close()})).catch((function(e){return me.open(e)})).finally((function(){return he.setLoadingState(!1)}))})),de=new E(".dialogue_type_card-remove"),pe=new X(".dialogue_type_card-view"),me=new R(".dialogue_type_error"),_e=new N(".dialogue_type_profile-change-picture",(function(e){_e.setLoadingState(!0),se.updateUserAvatar(e).then((function(e){ve.setUserInfo(e),_e.close()})).catch((function(e){return me.open(e)})).finally((function(){return _e.setLoadingState(!1)}))})),ye=new N(".dialogue_type_profile-edit",(function(e){ye.setLoadingState(!0),se.updateUserInfo(e).then((function(e){ve.setUserInfo(e),ye.close()})).catch((function(e){return me.open(e)})).finally((function(){return ye.setLoadingState(!1)}))})),ve=new oe({nameSelector:".profile__title-text",aboutSelector:".profile__subtitle",avatarSelector:".profile__avatar-image"}),be=function(e){var t=new c(e,"#card-template",{handleImageClick:function(){return pe.open(e)},handleLikeClick:function(e,n){n?se.dislikeCard(e).then((function(e){return t.updateLikes(e)})).catch((function(e){return me.open(e)})):se.likeCard(e).then((function(e){return t.updateLikes(e)})).catch((function(e){return me.open(e)}))},handleRemoveClick:function(e){de.open((function(){se.deleteCard(e).then((function(){t.removeElement(),de.close()})).catch((function(e){return me.open(e)}))}))}},ve.getUserInfo().id);return t.generateElement()};document.querySelector(".profile__add-button").addEventListener("click",(function(){return he.open()})),document.querySelector(".profile__avatar-overlay").addEventListener("click",(function(){return _e.open()})),document.querySelector(".profile__edit-button").addEventListener("click",(function(){ye.setInputValues(ve.getUserInfo()),ye.open()})),ve.setUserInfo(ue(ue({},ve.getUserInfo()),{},{name:"Loading..."})),Promise.all([se.getUserInfo(),se.getAllCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ve.setUserInfo(o),fe.renderItems(i)})).catch((function(e){return me.open(e)})),Array.from(document.querySelectorAll(ie.formSelector)).forEach((function(e){new ee(e,ie).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bUIsU0FBQThLLEdBQ2ZULEdBQW1CRixNQUFLLFdBQ3BCWCxHQUFJMEIsV0FBV0osR0FDVi9MLE1BQUssV0FDRjhMLEVBQUtNLGdCQUNMZCxHQUFtQjdHLFdBRXRCeUcsT0FBTSxTQUFBbEYsR0FBSyxPQUFJbUYsR0FBY0MsS0FBS3BGLFdBSW5EMEYsR0FBU1csY0FBYzdNLElBRzNCLE9BQU9zTSxFQUFLUSxtQkFVTTNKLFNBQVNDLGNEaE9NLHdCQ2lPdkJXLGlCQUFpQixTQUFTLGtCQUFNdUgsR0FBZ0JNLFVBRzNCekksU0FBU0MsY0RuT00sNEJDb092QlcsaUJBQWlCLFNBQVMsa0JBQU1pSSxHQUE2QkosVUFHOUR6SSxTQUFTQyxjRHRPTSx5QkN1T3ZCVyxpQkFBaUIsU0FBUyxXQUN4Q3FJLEdBQW9CVyxlQUFlYixHQUFTVyxlQUM1Q1QsR0FBb0JSLFVBdkZwQk0sR0FBU0MsWUFBVCxTQUNPRCxHQUFTVyxlQURoQixJQUVJbE4sS0FBTSxnQkFJVmtCLFFBQ0ttTSxJQUFJLENBQUMvQixHQUFJNEIsY0FBZTVCLEdBQUlnQyxnQkFDNUJ6TSxNQUFLLFlBQW1DLEksSUFBQSxHLEVBQUEsRSw0Q0FBQSxJLGt4QkFBakMwTSxFQUFpQyxLQUFuQkMsRUFBbUIsS0FDckNqQixHQUFTQyxZQUFZZSxHQUNyQmhDLEdBQWVrQyxZQUFZRCxNQUU5QnpCLE9BQU0sU0FBQWxGLEdBQUssT0FBSW1GLEdBQWNDLEtBQUtwRixNQVNyQmlCLE1BQU1DLEtBQUt2RSxTQUFTdUYsaUJBQWlCUCxHQUFtQjZDLGVBRWhFcEQsU0FBUSxTQUFBTSxHQUNPLElBQUlELEdBQWNDLEVBQWFDLElBQ3ZDa0Ysc0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9EaWFsb2d1ZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9EaWFsb2d1ZVdpdGhFcnJvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbGl0aWVzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFwaSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhbiBBcGkgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVybFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRoS2V5XG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGJhc2VVcmwsIGF1dGhLZXkpIHtcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgICAgIHRoaXMuX2F1dGhLZXkgPSBhdXRoS2V5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgY2FyZHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0QWxsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdCgnR0VUJywgJy9jYXJkcycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG5ldyBjYXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGlua1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBhZGRDYXJkKHtuYW1lLCBsaW5rfSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2NhcmRzJywge1xuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe25hbWUsIGxpbmt9KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBzcGVjaWZpYyBjYXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGRlbGV0ZUNhcmQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdERUxFVEUnLCAnL2NhcmRzLycgKyBpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlrZSBhIHNwZWNpZmljIGNhcmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgbGlrZUNhcmQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdQVVQnLCAnL2NhcmRzL2xpa2VzLycgKyBpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzbGlrZSBhIHNwZWNpZmljIGNhcmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZGlzbGlrZUNhcmQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdERUxFVEUnLCAnL2NhcmRzL2xpa2VzLycgKyBpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHVzZXIncyBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdHRVQnLCAnL3VzZXJzL21lJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHVzZXIncyBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFib3V0XG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHVwZGF0ZVVzZXJJbmZvKHtuYW1lLCBhYm91dH0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdQQVRDSCcsICcvdXNlcnMvbWUnLCB7XG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7bmFtZSwgYWJvdXR9KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdXNlcidzIGF2YXRhci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdmF0YXJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdXBkYXRlVXNlckF2YXRhcih7YXZhdGFyfSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QoJ1BBVENIJywgJy91c2Vycy9tZS9hdmF0YXInLCB7XG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7YXZhdGFyfSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHNlbmRpbmcgdGhlIHJlcXVlc3QgdG8gdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0VXJsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9zZW5kUmVxdWVzdChtZXRob2QsIHRhcmdldFVybCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgdGFyZ2V0VXJsLCB7XG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiB0aGlzLl9hdXRoS2V5LFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNoZWNraW5nIHRoZSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Byb21pc2V9IHJlc3BvbnNlXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfY2hlY2tSZXNwb25zZShyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEFuIGVycm9yIG9jY3VycmVkOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiY2xhc3MgQ2FyZCB7XG4gICAgLy8gU2VsZWN0b3JzIGFuZCBjbGFzc2VzXG4gICAgX2NhcmRTZWxlY3RvciA9ICcuY2FyZCc7XG4gICAgX3RpdGxlU2VsZWN0b3IgPSAnLmNhcmRfX3RpdGxlJztcbiAgICBfaW1hZ2VTZWxlY3RvciA9ICcuY2FyZF9faW1hZ2UnO1xuICAgIF9saWtlQnV0dG9uU2VsZWN0b3IgPSAnLmNhcmRfX2xpa2UtYnV0dG9uJztcbiAgICBfbGlrZUNvdW50ZXJTZWxlY3RvciA9ICcuY2FyZF9fbGlrZS1jb3VudGVyJztcbiAgICBfcmVtb3ZlQnV0dG9uU2VsZWN0b3IgPSAnLmNhcmRfX3JlbW92ZS1idXR0b24nO1xuICAgIF9saWtlQnV0dG9uQWN0aXZlQ2xhc3MgPSAnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBjYXJkIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9pZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxpbmtcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaWtlc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvd25lclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZVNlbGVjdG9yXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlSW1hZ2VDbGlja1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZUxpa2VDbGlja1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZVJlbW92ZUNsaWNrXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAge19pZCwgbmFtZSwgbGluaywgbGlrZXMsIG93bmVyfSxcbiAgICAgICAgdGVtcGxhdGVTZWxlY3RvcixcbiAgICAgICAge2hhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlUmVtb3ZlQ2xpY2t9LFxuICAgICAgICB1c2VySWRcbiAgICApIHtcbiAgICAgICAgLy8gQ2FyZCdzIGluZm9ybWF0aW9uXG4gICAgICAgIHRoaXMuX2lkID0gX2lkO1xuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XG4gICAgICAgIHRoaXMuX293bmVyID0gb3duZXI7XG5cbiAgICAgICAgLy8gQ2FyZCdzIHRlbXBsYXRlXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsaW5nIGNhbGxiYWNrc1xuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVDbGljayA9IGhhbmRsZVJlbW92ZUNsaWNrO1xuXG4gICAgICAgIC8vIFRoZSBpZCBvZiB0aGUgbG9nZ2VkLWluIHVzZXJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGEgY2FyZCBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybnMge0VsZW1lbnR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdlbmVyYXRlRWxlbWVudCgpIHtcbiAgICAgICAgdGhpcy5fY3JlYXRlRnJvbVRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2NoZWNrUGVybWlzc2lvbnMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVMaWtlcygpO1xuXG4gICAgICAgIC8vIENhcmQncyB0aXRsZVxuICAgICAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgICAgIC8vIENhcmQncyBpbWFnZVxuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGNhcmQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICByZW1vdmVFbGVtZW50KCkge1xuICAgICAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGxpa2VzIG9mIHRoZSBjYXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlrZXNcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdXBkYXRlTGlrZXMoe2xpa2VzfSA9IHt9KSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYW4gdXBkYXRlZCByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBsaWtlcyB8fCB0aGlzLl9saWtlcztcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgbG9nZ2VkLWluIHVzZXIgaGFzIGxpa2VkIHRoZSBjYXJkLCBhbmQgY2hhbmdlIGl0cycgc3RhdGUgYWNjb3JkaW5nbHlcbiAgICAgICAgdGhpcy5faXNMaWtlZCgpID8gdGhpcy5fbWFya0xpa2VkKCkgOiB0aGlzLl9tYXJrRGlzbGlrZWQoKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIGNvdW50ZXJcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50ZXJFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNhcmQgZWxlbWVudCBmcm9tIGRlZmluZWQgdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jcmVhdGVGcm9tVGVtcGxhdGUoKSB7XG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAgICAgICAuY29udGVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgICAgICB0aGlzLl90aXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RpdGxlU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2ltYWdlU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbGlrZUJ1dHRvblNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50ZXJFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9saWtlQ291bnRlclNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlQnV0dG9uRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcmVtb3ZlQnV0dG9uU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBldmVudCBsaXN0ZW5lcnMgZm9yIGNhcmQncyBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2spO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9pZCwgdGhpcy5faXNMaWtlZCgpKSk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVSZW1vdmVDbGljayh0aGlzLl9pZCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIGN1cnJlbnRseSBsb2dnZWQtaW4gdXNlciBpcyB0aGUgb3duZXIgb2YgdGhlIGNhcmQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jaGVja1Blcm1pc3Npb25zKCkge1xuICAgICAgICAvLyBJZiBub3QsIGRpc2FibGUgdGhlIHJlbW92ZSBidXR0b25cbiAgICAgICAgaWYgKHRoaXMuX293bmVyLl9pZCAhPT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVCdXR0b25FbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgY3VycmVudGx5IGxvZ2dlZC1pbiB1c2VyIGhhcyBsaWtlZCB0aGUgY2FyZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2lzTGlrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKHVzZXJEYXRhID0+IHVzZXJEYXRhLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrIHRoZSBjYXJkIGFzIGxpa2VkLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbWFya0xpa2VkKCkge1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2xpa2VCdXR0b25BY3RpdmVDbGFzcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFyayB0aGUgY2FyZCBhcyBkaXNsaWtlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX21hcmtEaXNsaWtlZCgpIHtcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9saWtlQnV0dG9uQWN0aXZlQ2xhc3MpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIERpYWxvZ3VlIHtcbiAgICAvLyBTZWxlY3RvcnMgYW5kIGNsYXNzZXNcbiAgICBfYmFja2dyb3VuZENsYXNzID0gJ2RpYWxvZ3VlJztcbiAgICBfY2xvc2VCdXR0b25DbGFzcyA9ICdkaWFsb2d1ZV9fY2xvc2UtYnV0dG9uJztcbiAgICBfb3BlbmVkQ2xhc3MgPSAnZGlhbG9ndWVfb3BlbmVkJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBkaWFsb2d1ZSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkaWFsb2d1ZVNlbGVjdG9yXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRpYWxvZ3VlU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkaWFsb2d1ZVNlbGVjdG9yKTtcblxuICAgICAgICAvLyBCaW5kIHRoZSBjdXJyZW50IGluc3RhbmNlIHRvIHRoZSBldmVudCBoYW5kbGVyc1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UgPSB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbiB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb3BlbmVkQ2xhc3MpO1xuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9kaWFsb2d1ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcGVuZWRDbGFzcyk7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBmcm9tIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNsb3NpbmcgdGhlIGRpYWxvZ3VlIGlmIFwiZXNjYXBlXCIgd2FzIHByZXNzZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgICAgIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSAmJiB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNsb3NpbmcgdGhlIGRpYWxvZ3VlIGlmIHRoZSB1c2VyIGNsaWNrZWQgb24gdGhlIGJhY2tncm91bmQgLyB0aGUgY2xvc2UgYnV0dG9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9oYW5kbGVDbGlja0Nsb3NlKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuX2JhY2tncm91bmRDbGFzcykgfHxcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fY2xvc2VCdXR0b25DbGFzcykpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGlhbG9ndWU7XG4iLCJpbXBvcnQgRGlhbG9ndWUgZnJvbSAnLi9EaWFsb2d1ZSc7XG5cbmNsYXNzIERpYWxvZ3VlV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIERpYWxvZ3VlIHtcbiAgICAvLyBTZWxlY3RvcnMgYW5kIGNsYXNzZXNcbiAgICBfYnV0dG9uU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX19zdWJtaXQtYnV0dG9uJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBkaWFsb2d1ZSB3aXRoIGFsZXJ0IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRpYWxvZ3VlU2VsZWN0b3JcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGlhbG9ndWVTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihkaWFsb2d1ZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2RpYWxvZ3VlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2J1dHRvblNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVuIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmZpcm1hdGlvbkNhbGxiYWNrXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG9wZW4oY29uZmlybWF0aW9uQ2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fY29uZmlybWF0aW9uQ2FsbGJhY2sgPSBjb25maXJtYXRpb25DYWxsYmFjaztcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBldmVudCBsaXN0ZW5lcnMgdG8gdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY29uZmlybWF0aW9uQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZnJvbSB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jb25maXJtYXRpb25DYWxsYmFjayk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEaWFsb2d1ZVdpdGhDb25maXJtYXRpb247XG4iLCJpbXBvcnQgRGlhbG9ndWUgZnJvbSAnLi9EaWFsb2d1ZSc7XG5cbmNsYXNzIERpYWxvZ3VlV2l0aEVycm9yIGV4dGVuZHMgRGlhbG9ndWUge1xuICAgIC8vIENvbmZpZ3VyYXRpb25cbiAgICBfaGlkZUFmdGVyU2Vjb25kcyA9IDU7XG5cbiAgICAvLyBTZWxlY3RvcnMgYW5kIGNsYXNzZXNcbiAgICBfcGFyYWdyYXBoU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX19wYXJhZ3JhcGhfcHJpbWFyeSc7XG4gICAgX2NvdW50ZXJTZWxlY3RvciA9ICcuZGlhbG9ndWVfX2NvdW50ZXInO1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIGRpYWxvZ3VlIHdpdGggZXJyb3IgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGlhbG9ndWVTZWxlY3RvclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkaWFsb2d1ZVNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKGRpYWxvZ3VlU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9wYXJhZ3JhcGhFbGVtZW50ID0gdGhpcy5fZGlhbG9ndWVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcGFyYWdyYXBoU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9jb3VudGVyRWxlbWVudCA9IHRoaXMuX2RpYWxvZ3VlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvdW50ZXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbiB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JNZXNzYWdlXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG9wZW4oZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICAgICAgdGhpcy5fY2xlYXJDb3VudGVyKCk7XG5cbiAgICAgICAgLy8gU2V0IHRoZSBlcnJvciBtZXNzYWdlXG4gICAgICAgIHRoaXMuX3BhcmFncmFwaEVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG5cbiAgICAgICAgLy8gUmVzZXQgdGhlIGNvdW50ZXIsIGFuZCB1cGRhdGUgaXQgZXZlcnkgc2Vjb25kXG4gICAgICAgIHRoaXMuX2NvdW50ZXJFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5faGlkZUFmdGVyU2Vjb25kcztcbiAgICAgICAgdGhpcy5faW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2NvdW50ZXJFbGVtZW50LnRleHRDb250ZW50IC09IDE7XG4gICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgIC8vIEhpZGUgdGhlIGVycm9yIGFmdGVyIFggc2Vjb25kcywgYW5kIGRpc2FibGUgdGhlIGNvdW50ZXJcbiAgICAgICAgdGhpcy5fdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmNsb3NlKCksIHRoaXMuX2hpZGVBZnRlclNlY29uZHMgKiAxMDAwKTtcblxuICAgICAgICAvLyBJbiBhZGRpdGlvbiB0byB0aGUgZGlhbG9ndWUsIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fY2xlYXJDb3VudGVyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzYWJsZSB0aGUgY291bnRlciB3aGVuIHRoZSBkaWFsb2d1ZSBpcyBjbG9zZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jbGVhckNvdW50ZXIoKSB7XG4gICAgICAgIHRoaXMuX2ludGVydmFsSWQgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbElkKTtcbiAgICAgICAgdGhpcy5fdGltZW91dElkICYmIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0SWQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGlhbG9ndWVXaXRoRXJyb3I7XG4iLCJpbXBvcnQgRGlhbG9ndWUgZnJvbSAnLi9EaWFsb2d1ZSc7XG5cbmNsYXNzIERpYWxvZ3VlV2l0aEZvcm0gZXh0ZW5kcyBEaWFsb2d1ZSB7XG4gICAgLy8gU2VsZWN0b3JzIGFuZCBjbGFzc2VzXG4gICAgX2Zvcm1TZWxlY3RvciA9ICcuZGlhbG9ndWVfX2Zvcm0nO1xuICAgIF9idXR0b25TZWxlY3RvciA9ICcuZGlhbG9ndWVfX3N1Ym1pdC1idXR0b24nO1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIGRpYWxvZ3VlIHdpdGggZm9ybSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkaWFsb2d1ZVNlbGVjdG9yXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gc3VibWlzc2lvbkNhbGxiYWNrXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRpYWxvZ3VlU2VsZWN0b3IsIHN1Ym1pc3Npb25DYWxsYmFjaykge1xuICAgICAgICBzdXBlcihkaWFsb2d1ZVNlbGVjdG9yKTtcblxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX2RpYWxvZ3VlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9kaWFsb2d1ZUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9idXR0b25TZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3N1Ym1pc3Npb25DYWxsYmFjayA9IHN1Ym1pc3Npb25DYWxsYmFjaztcblxuICAgICAgICAvLyBCaW5kIHRoZSBjdXJyZW50IGluc3RhbmNlIHRvIHRoZSBldmVudCBoYW5kbGVyXG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXNzaW9uID0gdGhpcy5faGFuZGxlRm9ybVN1Ym1pc3Npb24uYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9zZSB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGRlZmF1bHQgaW5wdXQgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0c0xpc3RcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2V0SW5wdXRWYWx1ZXMoaW5wdXRzTGlzdCkge1xuICAgICAgICBmb3IgKGNvbnN0IGlucHV0TmFtZSBpbiBpbnB1dHNMaXN0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fZm9ybUVsZW1lbnQuZWxlbWVudHNbaW5wdXROYW1lXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmVsZW1lbnRzW2lucHV0TmFtZV0udmFsdWUgPSBpbnB1dHNMaXN0W2lucHV0TmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgbG9hZGluZyBzdGF0ZTsgdXNlZCB3aGVuIHdhaXRpbmcgZm9yIHJlc3BvbnNlIGZyb20gdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNMb2FkaW5nXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNldExvYWRpbmdTdGF0ZShpc0xvYWRpbmcpIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC50ZXh0Q29udGVudCA9ICdTYXZpbmcuLi4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC50ZXh0Q29udGVudCA9ICdTYXZlJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBldmVudCBsaXN0ZW5lcnMgdG8gdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9oYW5kbGVGb3JtU3VibWlzc2lvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBmcm9tIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5faGFuZGxlRm9ybVN1Ym1pc3Npb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSB0aGUgc3VibWlzc2lvbiBvZiB0aGUgZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfaGFuZGxlRm9ybVN1Ym1pc3Npb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5fc3VibWlzc2lvbkNhbGxiYWNrKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgaW5wdXQgdmFsdWVzLlxuICAgICAqXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgaW5wdXRzTGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQuZWxlbWVudHMpO1xuICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuXG4gICAgICAgIGlucHV0c0xpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgaW5wdXRWYWx1ZXNbaW5wdXRFbGVtZW50Lm5hbWVdID0gaW5wdXRFbGVtZW50LnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEaWFsb2d1ZVdpdGhGb3JtO1xuIiwiaW1wb3J0IERpYWxvZ3VlIGZyb20gJy4vRGlhbG9ndWUnO1xuXG5jbGFzcyBEaWFsb2d1ZVdpdGhJbWFnZSBleHRlbmRzIERpYWxvZ3VlIHtcbiAgICAvLyBTZWxlY3RvcnMgYW5kIGNsYXNzZXNcbiAgICBfaW1hZ2VTZWxlY3RvciA9ICcuZGlhbG9ndWVfX2ltYWdlJztcbiAgICBfY2FwdGlvblNlbGVjdG9yID0gJy5kaWFsb2d1ZV9fY2FwdGlvbic7XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgZGlhbG9ndWUgd2l0aCBpbWFnZSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkaWFsb2d1ZVNlbGVjdG9yXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRpYWxvZ3VlU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIoZGlhbG9ndWVTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX2RpYWxvZ3VlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2ltYWdlU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9jYXB0aW9uRWxlbWVudCA9IHRoaXMuX2RpYWxvZ3VlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcHRpb25TZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbiB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsaW5rXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG9wZW4oe25hbWUsIGxpbmt9KSB7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcblxuICAgICAgICAvLyBEaWFsb2d1ZSdzIGltYWdlXG4gICAgICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBuYW1lO1xuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gbGluaztcblxuICAgICAgICAvLyBEaWFsb2d1ZSdzIGNhcHRpb25cbiAgICAgICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGlhbG9ndWVXaXRoSW1hZ2U7XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgZm9ybSB2YWxpZGF0b3IgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGZvcm1FbGVtZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHZhbGlkYXRpb25TZXR0aW5nc1xuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgdmFsaWRhdGlvblNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncyA9IHZhbGlkYXRpb25TZXR0aW5ncztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmFibGUgZm9ybSB2YWxpZGF0aW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX2FuYWx5emVGb3JtKCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKCk7XG5cbiAgICAgICAgLy8gR28gdGhyb3VnaCB0aGUgaW5wdXRzIGxpc3QsIGFuZCBhdHRhY2ggdG8gZWFjaCBhbiBldmVudCBsaXN0ZW5lciB3aGljaCB3YXRjaGVzIGZvciBjaGFuZ2VzXG4gICAgICAgIHRoaXMuX2lucHV0c0xpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTWFrZSB0aGUgc3VibWl0IGJ1dHRvbiBkaXNhYmxlZCBhZ2FpbiBhZnRlciB0aGUgZm9ybSBpcyByZXNldFxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdyZXNldCcsICgpID0+IHRoaXMuX21ha2VTdWJtaXRCdXR0b25EaXNhYmxlZCgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbmFseXplIHRoZSBwYXNzZWQgZm9ybSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfYW5hbHl6ZUZvcm0oKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIGlucHV0c1xuICAgICAgICB0aGlzLl9pbnB1dHNMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBzdWJtaXQgYnV0dG9uXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgYW4gaW5wdXQgaGFzIGFuIGVycm9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBpbnB1dEVsZW1lbnRcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBhbiBpbnB1dCBlcnJvciB2aXNpYmxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBpbnB1dEVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JNZXNzYWdlXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZ2V0SW5wdXRFcnJvckVsZW1lbnQoaW5wdXRFbGVtZW50KTtcblxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmVycm9yVmlzaWJsZUNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2UgYW4gaW5wdXQgZXJyb3IgaGlkZGVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIGlucHV0RWxlbWVudFxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9nZXRJbnB1dEVycm9yRWxlbWVudChpbnB1dEVsZW1lbnQpO1xuXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3MuZXJyb3JWaXNpYmxlQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIHRoZSBlcnJvciBlbGVtZW50IG9mIGEgc3BlY2lmaWMgaW5wdXQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gaW5wdXRFbGVtZW50XG4gICAgICogQHJldHVybnMge0VsZW1lbnR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZ2V0SW5wdXRFcnJvckVsZW1lbnQoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGVycm9yU2VsZWN0b3IgPSB0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRFcnJvclNlbGVjdG9yXG4gICAgICAgICAgICAucmVwbGFjZSgnJWZvcm1JZCcsIHRoaXMuX2Zvcm1FbGVtZW50LmlkKVxuICAgICAgICAgICAgLnJlcGxhY2UoJyVpbnB1dE5hbWUnLCBpbnB1dEVsZW1lbnQubmFtZSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZXJyb3JTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHRoZSBzdGF0ZSBvZiB0aGUgc3VibWl0IGJ1dHRvbiAoYWN0aXZlIC8gZGlzYWJsZWQpLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfdG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUoKSB7XG4gICAgICAgIHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpID8gdGhpcy5fbWFrZVN1Ym1pdEJ1dHRvbkRpc2FibGVkKCkgOiB0aGlzLl9tYWtlU3VibWl0QnV0dG9uQWN0aXZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciBhbGwgaW5wdXRzIGFyZSB2YWxpZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0c0xpc3Quc29tZShpbnB1dEVsZW1lbnQgPT4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSB0aGUgc3VibWl0IGJ1dHRvbiBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9tYWtlU3VibWl0QnV0dG9uQWN0aXZlKCkge1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSB0aGUgc3VibWl0IGJ1dHRvbiBkaXNhYmxlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX21ha2VTdWJtaXRCdXR0b25EaXNhYmxlZCgpIHtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIHNlY3Rpb24gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29udGFpbmVyU2VsZWN0b3JcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZW5kZXJlckNhbGxiYWNrXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lclNlbGVjdG9yLCByZW5kZXJlckNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcmVuZGVyZXJDYWxsYmFjayA9IHJlbmRlcmVyQ2FsbGJhY2s7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIGl0ZW1zIGZyb20gbGlzdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICByZW5kZXJJdGVtcyhpdGVtc0xpc3QpIHtcbiAgICAgICAgaXRlbXNMaXN0LmZvckVhY2goaXRlbSA9PiB0aGlzLl9yZW5kZXJlckNhbGxiYWNrKGl0ZW0pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gZWxlbWVudCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBzZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGFkZEVsZW1lbnRGaXJzdChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gZWxlbWVudCB0byB0aGUgZW5kIG9mIHRoZSBzZWN0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGFkZEVsZW1lbnRMYXN0KGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyRWxlbWVudC5hcHBlbmQoZWxlbWVudCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICAgIC8vIERlZmF1bHQgaW5mb3JtYXRpb25cbiAgICBfaWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgdXNlciBpbmZvIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVTZWxlY3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhYm91dFNlbGVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF2YXRhclNlbGVjdG9yXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHtuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yfSkge1xuICAgICAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fYWJvdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIHVzZXIncyBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IHRoaXMuX2lkLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBhYm91dDogdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgICAgICAgYXZhdGFyOiB0aGlzLl9hdmF0YXJFbGVtZW50LnNyY1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB1c2VyJ3MgaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gX2lkXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWJvdXRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXZhdGFyXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNldFVzZXJJbmZvKHtfaWQsIG5hbWUsIGFib3V0LCBhdmF0YXJ9KSB7XG4gICAgICAgIHRoaXMuX2lkID0gX2lkIHx8IHRoaXMuX2lkO1xuICAgICAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xuICAgICAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhcjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiZXhwb3J0IGNvbnN0IGFwaUJhc2VVcmwgPSAnaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMic7XG5leHBvcnQgY29uc3QgYXBpQXV0aEtleSA9ICcxOTBlOTQ4Ni1jZjg0LTQzNzAtYWE0Mi04MDgzMTE1MmFkODInO1xuXG5leHBvcnQgY29uc3QgYnV0dG9uQ2FyZEFkZFNlbGVjdG9yID0gJy5wcm9maWxlX19hZGQtYnV0dG9uJztcbmV4cG9ydCBjb25zdCBidXR0b25Qcm9maWxlQ2hhbmdlUGljdHVyZVNlbGVjdG9yID0gJy5wcm9maWxlX19hdmF0YXItb3ZlcmxheSc7XG5leHBvcnQgY29uc3QgYnV0dG9uUHJvZmlsZUVkaXRTZWxlY3RvciA9ICcucHJvZmlsZV9fZWRpdC1idXR0b24nO1xuXG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXJTZWxlY3RvciA9ICcuY2FyZHNfX2xpc3QnO1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gJyNjYXJkLXRlbXBsYXRlJztcblxuZXhwb3J0IGNvbnN0IGRpYWxvZ3VlQ2FyZEFkZFNlbGVjdG9yID0gJy5kaWFsb2d1ZV90eXBlX2NhcmQtYWRkJztcbmV4cG9ydCBjb25zdCBkaWFsb2d1ZUNhcmRSZW1vdmVTZWxlY3RvciA9ICcuZGlhbG9ndWVfdHlwZV9jYXJkLXJlbW92ZSc7XG5leHBvcnQgY29uc3QgZGlhbG9ndWVDYXJkVmlld1NlbGVjdG9yID0gJy5kaWFsb2d1ZV90eXBlX2NhcmQtdmlldyc7XG5leHBvcnQgY29uc3QgZGlhbG9ndWVFcnJvclNlbGVjdG9yID0gJy5kaWFsb2d1ZV90eXBlX2Vycm9yJztcbmV4cG9ydCBjb25zdCBkaWFsb2d1ZVByb2ZpbGVDaGFuZ2VQaWN0dXJlU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX3R5cGVfcHJvZmlsZS1jaGFuZ2UtcGljdHVyZSc7XG5leHBvcnQgY29uc3QgZGlhbG9ndWVQcm9maWxlRWRpdFNlbGVjdG9yID0gJy5kaWFsb2d1ZV90eXBlX3Byb2ZpbGUtZWRpdCc7XG5cbmV4cG9ydCBjb25zdCB1c2VySW5mb0Fib3V0U2VsZWN0b3IgPSAnLnByb2ZpbGVfX3N1YnRpdGxlJztcbmV4cG9ydCBjb25zdCB1c2VySW5mb0F2YXRhclNlbGVjdG9yID0gJy5wcm9maWxlX19hdmF0YXItaW1hZ2UnO1xuZXhwb3J0IGNvbnN0IHVzZXJJbmZvTmFtZVNlbGVjdG9yID0gJy5wcm9maWxlX190aXRsZS10ZXh0JztcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6ICcuZGlhbG9ndWVfX2Zvcm0nLFxuICAgIGlucHV0U2VsZWN0b3I6ICcuZGlhbG9ndWVfX2Zvcm0tZmllbGQnLFxuICAgIGlucHV0RXJyb3JTZWxlY3RvcjogJy4lZm9ybUlkLSVpbnB1dE5hbWUtZXJyb3InLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmRpYWxvZ3VlX19zdWJtaXQtYnV0dG9uJyxcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZGlhbG9ndWVfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWQnLFxuICAgIGlucHV0RXJyb3JDbGFzczogJ2RpYWxvZ3VlX19mb3JtLWZpZWxkX2hhcy1lcnJvcicsXG4gICAgZXJyb3JWaXNpYmxlQ2xhc3M6ICdkaWFsb2d1ZV9fZm9ybS1lcnJvcl92aXNpYmxlJ1xufTtcbiIsImltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGknO1xuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkJztcbmltcG9ydCBEaWFsb2d1ZVdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9EaWFsb2d1ZVdpdGhDb25maXJtYXRpb24nO1xuaW1wb3J0IERpYWxvZ3VlV2l0aEVycm9yIGZyb20gJy4uL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoRXJyb3InO1xuaW1wb3J0IERpYWxvZ3VlV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9EaWFsb2d1ZVdpdGhGb3JtJztcbmltcG9ydCBEaWFsb2d1ZVdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL0RpYWxvZ3VlV2l0aEltYWdlJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvcic7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24nO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8nO1xuaW1wb3J0IHtcbiAgICBhcGlBdXRoS2V5LFxuICAgIGFwaUJhc2VVcmwsXG4gICAgYnV0dG9uQ2FyZEFkZFNlbGVjdG9yLFxuICAgIGJ1dHRvblByb2ZpbGVDaGFuZ2VQaWN0dXJlU2VsZWN0b3IsXG4gICAgYnV0dG9uUHJvZmlsZUVkaXRTZWxlY3RvcixcbiAgICBjYXJkc0NvbnRhaW5lclNlbGVjdG9yLFxuICAgIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLFxuICAgIGRpYWxvZ3VlQ2FyZEFkZFNlbGVjdG9yLFxuICAgIGRpYWxvZ3VlQ2FyZFJlbW92ZVNlbGVjdG9yLFxuICAgIGRpYWxvZ3VlQ2FyZFZpZXdTZWxlY3RvcixcbiAgICBkaWFsb2d1ZUVycm9yU2VsZWN0b3IsXG4gICAgZGlhbG9ndWVQcm9maWxlQ2hhbmdlUGljdHVyZVNlbGVjdG9yLFxuICAgIGRpYWxvZ3VlUHJvZmlsZUVkaXRTZWxlY3RvcixcbiAgICB1c2VySW5mb0Fib3V0U2VsZWN0b3IsXG4gICAgdXNlckluZm9BdmF0YXJTZWxlY3RvcixcbiAgICB1c2VySW5mb05hbWVTZWxlY3RvcixcbiAgICB2YWxpZGF0aW9uU2V0dGluZ3Ncbn0gZnJvbSAnLi4vdXRpbGl0aWVzL2NvbnN0YW50cyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcblxuLypcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogSU5TVEFOQ0VTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBcGkuXG4gKlxuICogQHR5cGUge0FwaX1cbiAqL1xuY29uc3QgYXBpID0gbmV3IEFwaShhcGlCYXNlVXJsLCBhcGlBdXRoS2V5KTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgU2VjdGlvbiBmb3IgdGhlIGNhcmRzIGNvbnRhaW5lci5cbiAqXG4gKiBAdHlwZSB7U2VjdGlvbn1cbiAqL1xuY29uc3QgY2FyZHNDb250YWluZXIgPSBuZXcgU2VjdGlvbihcbiAgICBjYXJkc0NvbnRhaW5lclNlbGVjdG9yLFxuICAgIGNhcmREYXRhID0+IGNhcmRzQ29udGFpbmVyLmFkZEVsZW1lbnRMYXN0KFxuICAgICAgICBjcmVhdGVDYXJkKGNhcmREYXRhKVxuICAgIClcbik7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIERpYWxvZ3VlV2l0aEZvcm0gZm9yIHRoZSBjYXJkLWFkZCBkaWFsb2d1ZS5cbiAqXG4gKiBAdHlwZSB7RGlhbG9ndWVXaXRoRm9ybX1cbiAqL1xuY29uc3QgZGlhbG9ndWVDYXJkQWRkID0gbmV3IERpYWxvZ3VlV2l0aEZvcm0oZGlhbG9ndWVDYXJkQWRkU2VsZWN0b3IsIGlucHV0c0xpc3QgPT4ge1xuICAgIGRpYWxvZ3VlQ2FyZEFkZC5zZXRMb2FkaW5nU3RhdGUodHJ1ZSk7XG5cbiAgICBhcGkuYWRkQ2FyZChpbnB1dHNMaXN0KVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBjYXJkc0NvbnRhaW5lci5hZGRFbGVtZW50Rmlyc3QoY3JlYXRlQ2FyZChyZXNwb25zZSkpO1xuICAgICAgICAgICAgZGlhbG9ndWVDYXJkQWRkLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiBkaWFsb2d1ZUVycm9yLm9wZW4oZXJyb3IpKVxuICAgICAgICAuZmluYWxseSgoKSA9PiBkaWFsb2d1ZUNhcmRBZGQuc2V0TG9hZGluZ1N0YXRlKGZhbHNlKSk7XG59KTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgRGlhbG9ndWVXaXRoQ29uZmlybWF0aW9uIGZvciB0aGUgY2FyZC1yZW1vdmUgZGlhbG9ndWUuXG4gKlxuICogQHR5cGUge0RpYWxvZ3VlV2l0aENvbmZpcm1hdGlvbn1cbiAqL1xuY29uc3QgZGlhbG9ndWVDYXJkUmVtb3ZlID0gbmV3IERpYWxvZ3VlV2l0aENvbmZpcm1hdGlvbihkaWFsb2d1ZUNhcmRSZW1vdmVTZWxlY3Rvcik7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIERpYWxvZ3VlV2l0aEltYWdlIGZvciB0aGUgY2FyZC12aWV3IGRpYWxvZ3VlLlxuICpcbiAqIEB0eXBlIHtEaWFsb2d1ZVdpdGhJbWFnZX1cbiAqL1xuY29uc3QgZGlhbG9ndWVDYXJkVmlldyA9IG5ldyBEaWFsb2d1ZVdpdGhJbWFnZShkaWFsb2d1ZUNhcmRWaWV3U2VsZWN0b3IpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBEaWFsb2d1ZVdpdGhFcnJvciBmb3IgdGhlIGVycm9yIGRpYWxvZ3VlLlxuICpcbiAqIEB0eXBlIHtEaWFsb2d1ZVdpdGhFcnJvcn1cbiAqL1xuY29uc3QgZGlhbG9ndWVFcnJvciA9IG5ldyBEaWFsb2d1ZVdpdGhFcnJvcihkaWFsb2d1ZUVycm9yU2VsZWN0b3IpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBEaWFsb2d1ZVdpdGhGb3JtIGZvciB0aGUgcHJvZmlsZS1jaGFuZ2UtcGljdHVyZSBkaWFsb2d1ZS5cbiAqXG4gKiBAdHlwZSB7RGlhbG9ndWVXaXRoRm9ybX1cbiAqL1xuY29uc3QgZGlhbG9ndWVQcm9maWxlQ2hhbmdlUGljdHVyZSA9IG5ldyBEaWFsb2d1ZVdpdGhGb3JtKGRpYWxvZ3VlUHJvZmlsZUNoYW5nZVBpY3R1cmVTZWxlY3RvciwgaW5wdXRzTGlzdCA9PiB7XG4gICAgZGlhbG9ndWVQcm9maWxlQ2hhbmdlUGljdHVyZS5zZXRMb2FkaW5nU3RhdGUodHJ1ZSk7XG5cbiAgICBhcGkudXBkYXRlVXNlckF2YXRhcihpbnB1dHNMaXN0KVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXNwb25zZSk7XG4gICAgICAgICAgICBkaWFsb2d1ZVByb2ZpbGVDaGFuZ2VQaWN0dXJlLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiBkaWFsb2d1ZUVycm9yLm9wZW4oZXJyb3IpKVxuICAgICAgICAuZmluYWxseSgoKSA9PiBkaWFsb2d1ZVByb2ZpbGVDaGFuZ2VQaWN0dXJlLnNldExvYWRpbmdTdGF0ZShmYWxzZSkpO1xufSk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIERpYWxvZ3VlV2l0aEZvcm0gZm9yIHRoZSBwcm9maWxlLWVkaXQgZGlhbG9ndWUuXG4gKlxuICogQHR5cGUge0RpYWxvZ3VlV2l0aEZvcm19XG4gKi9cbmNvbnN0IGRpYWxvZ3VlUHJvZmlsZUVkaXQgPSBuZXcgRGlhbG9ndWVXaXRoRm9ybShkaWFsb2d1ZVByb2ZpbGVFZGl0U2VsZWN0b3IsIGlucHV0c0xpc3QgPT4ge1xuICAgIGRpYWxvZ3VlUHJvZmlsZUVkaXQuc2V0TG9hZGluZ1N0YXRlKHRydWUpO1xuXG4gICAgYXBpLnVwZGF0ZVVzZXJJbmZvKGlucHV0c0xpc3QpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGRpYWxvZ3VlUHJvZmlsZUVkaXQuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IGRpYWxvZ3VlRXJyb3Iub3BlbihlcnJvcikpXG4gICAgICAgIC5maW5hbGx5KCgpID0+IGRpYWxvZ3VlUHJvZmlsZUVkaXQuc2V0TG9hZGluZ1N0YXRlKGZhbHNlKSk7XG59KTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgVXNlckluZm8gZm9yIHRoZSB1c2VyIHByb2ZpbGUuXG4gKlxuICogQHR5cGUge1VzZXJJbmZvfVxuICovXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gICAgbmFtZVNlbGVjdG9yOiB1c2VySW5mb05hbWVTZWxlY3RvcixcbiAgICBhYm91dFNlbGVjdG9yOiB1c2VySW5mb0Fib3V0U2VsZWN0b3IsXG4gICAgYXZhdGFyU2VsZWN0b3I6IHVzZXJJbmZvQXZhdGFyU2VsZWN0b3Jcbn0pO1xuXG4vKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBGVU5DVElPTlNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbi8qKlxuICogR2V0IHRoZSBpbml0aWFsIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBhbmQgdXBkYXRlIHRoZSBwYWdlIGFjY29yZGluZ2x5LlxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5jb25zdCBsb2FkSW5pdGlhbERhdGEgPSAoKSA9PiB7XG4gICAgLy8gRGlzcGxheSBhIGxvYWRpbmcgbWVzc2FnZSB3aGlsZSB3YWl0aW5nIGZvciByZXNwb25zZVxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgICAgLi4udXNlckluZm8uZ2V0VXNlckluZm8oKSxcbiAgICAgICAgbmFtZTogJ0xvYWRpbmcuLi4nXG4gICAgfSk7XG5cbiAgICAvLyBPcmRlciBvZiBleGVjdXRpb24gaXMgaW1wb3J0YW50IGhlcmVcbiAgICBQcm9taXNlXG4gICAgICAgIC5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0QWxsQ2FyZHMoKV0pXG4gICAgICAgIC50aGVuKChbdXNlclJlc3BvbnNlLCBjYXJkc1Jlc3BvbnNlXSkgPT4ge1xuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlclJlc3BvbnNlKTtcbiAgICAgICAgICAgIGNhcmRzQ29udGFpbmVyLnJlbmRlckl0ZW1zKGNhcmRzUmVzcG9uc2UpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4gZGlhbG9ndWVFcnJvci5vcGVuKGVycm9yKSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBGb3JtVmFsaWRhdG9yIGZvciBlYWNoIGZvcm0gb24gdGhlIHBhZ2UuXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmNvbnN0IGFkZFZhbGlkYXRpb25Ub0Zvcm1zID0gKCkgPT4ge1xuICAgIGNvbnN0IGZvcm1zTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh2YWxpZGF0aW9uU2V0dGluZ3MuZm9ybVNlbGVjdG9yKSk7XG5cbiAgICBmb3Jtc0xpc3QuZm9yRWFjaChmb3JtRWxlbWVudCA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRvck9iaiA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1FbGVtZW50LCB2YWxpZGF0aW9uU2V0dGluZ3MpO1xuICAgICAgICB2YWxpZGF0b3JPYmouZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBjYXJkIHdoaWNoIG9wZW5zIGEgZGlhbG9ndWUgd2hlbiBjbGlja2VkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjYXJkRGF0YVxuICogQHJldHVybnMge0VsZW1lbnR9XG4gKi9cbmNvbnN0IGNyZWF0ZUNhcmQgPSBjYXJkRGF0YSA9PiB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgICAgICBjYXJkRGF0YSxcbiAgICAgICAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gICAgICAgIHtcbiAgICAgICAgICAgIGhhbmRsZUltYWdlQ2xpY2s6ICgpID0+IGRpYWxvZ3VlQ2FyZFZpZXcub3BlbihjYXJkRGF0YSksXG4gICAgICAgICAgICBoYW5kbGVMaWtlQ2xpY2s6IChjYXJkSWQsIGlzTGlrZWQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXNMaWtlZCkge1xuICAgICAgICAgICAgICAgICAgICBhcGkuZGlzbGlrZUNhcmQoY2FyZElkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gY2FyZC51cGRhdGVMaWtlcyhyZXNwb25zZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gZGlhbG9ndWVFcnJvci5vcGVuKGVycm9yKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXBpLmxpa2VDYXJkKGNhcmRJZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IGNhcmQudXBkYXRlTGlrZXMocmVzcG9uc2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGRpYWxvZ3VlRXJyb3Iub3BlbihlcnJvcikpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoYW5kbGVSZW1vdmVDbGljazogY2FyZElkID0+IHtcbiAgICAgICAgICAgICAgICBkaWFsb2d1ZUNhcmRSZW1vdmUub3BlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJkLnJlbW92ZUVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2d1ZUNhcmRSZW1vdmUuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gZGlhbG9ndWVFcnJvci5vcGVuKGVycm9yKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHVzZXJJbmZvLmdldFVzZXJJbmZvKCkuaWRcbiAgICApO1xuXG4gICAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVFbGVtZW50KCk7XG59XG5cbi8qXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEVYRUNVVElPTlNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbi8vIENvbm5lY3QgdGhlIGNhcmQtYWRkIGJ1dHRvbiB0byB0aGUgcmVsYXRlZCBkaWFsb2d1ZVxuY29uc3QgYnV0dG9uQ2FyZEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uQ2FyZEFkZFNlbGVjdG9yKTtcbmJ1dHRvbkNhcmRBZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkaWFsb2d1ZUNhcmRBZGQub3BlbigpKTtcblxuLy8gQ29ubmVjdCB0aGUgcHJvZmlsZS1jaGFuZ2UtcGljdHVyZSBidXR0b24gdG8gdGhlIHJlbGF0ZWQgZGlhbG9ndWVcbmNvbnN0IGJ1dHRvblByb2ZpbGVDaGFuZ2VQaWN0dXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25Qcm9maWxlQ2hhbmdlUGljdHVyZVNlbGVjdG9yKTtcbmJ1dHRvblByb2ZpbGVDaGFuZ2VQaWN0dXJlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZGlhbG9ndWVQcm9maWxlQ2hhbmdlUGljdHVyZS5vcGVuKCkpO1xuXG4vLyBDb25uZWN0IHRoZSBwcm9maWxlLWVkaXQgYnV0dG9uIHRvIHRoZSByZWxhdGVkIGRpYWxvZ3VlXG5jb25zdCBidXR0b25Qcm9maWxlRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uUHJvZmlsZUVkaXRTZWxlY3Rvcik7XG5idXR0b25Qcm9maWxlRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBkaWFsb2d1ZVByb2ZpbGVFZGl0LnNldElucHV0VmFsdWVzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xuICAgIGRpYWxvZ3VlUHJvZmlsZUVkaXQub3BlbigpO1xufSk7XG5cbmxvYWRJbml0aWFsRGF0YSgpO1xuYWRkVmFsaWRhdGlvblRvRm9ybXMoKTtcbiJdLCJuYW1lcyI6WyJBcGkiLCJiYXNlVXJsIiwiYXV0aEtleSIsInRoaXMiLCJfYmFzZVVybCIsIl9hdXRoS2V5IiwiX3NlbmRSZXF1ZXN0IiwibmFtZSIsImxpbmsiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImlkIiwiYWJvdXQiLCJhdmF0YXIiLCJtZXRob2QiLCJ0YXJnZXRVcmwiLCJvcHRpb25zIiwiZmV0Y2giLCJoZWFkZXJzIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwicmVzcG9uc2UiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIkNhcmQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwidXNlcklkIiwiX2lkIiwibGlrZXMiLCJvd25lciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJoYW5kbGVSZW1vdmVDbGljayIsIl9uYW1lIiwiX2xpbmsiLCJfbGlrZXMiLCJfb3duZXIiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVSZW1vdmVDbGljayIsIl91c2VySWQiLCJfY3JlYXRlRnJvbVRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NoZWNrUGVybWlzc2lvbnMiLCJ1cGRhdGVMaWtlcyIsIl90aXRsZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsIl9pbWFnZUVsZW1lbnQiLCJhbHQiLCJzcmMiLCJfY2FyZEVsZW1lbnQiLCJyZW1vdmUiLCJfaXNMaWtlZCIsIl9tYXJrTGlrZWQiLCJfbWFya0Rpc2xpa2VkIiwiX2xpa2VDb3VudGVyRWxlbWVudCIsImxlbmd0aCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJfY2FyZFNlbGVjdG9yIiwiY2xvbmVOb2RlIiwiX3RpdGxlU2VsZWN0b3IiLCJfaW1hZ2VTZWxlY3RvciIsIl9saWtlQnV0dG9uRWxlbWVudCIsIl9saWtlQnV0dG9uU2VsZWN0b3IiLCJfbGlrZUNvdW50ZXJTZWxlY3RvciIsIl9yZW1vdmVCdXR0b25FbGVtZW50IiwiX3JlbW92ZUJ1dHRvblNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNvbWUiLCJ1c2VyRGF0YSIsImNsYXNzTGlzdCIsImFkZCIsIl9saWtlQnV0dG9uQWN0aXZlQ2xhc3MiLCJEaWFsb2d1ZSIsImRpYWxvZ3VlU2VsZWN0b3IiLCJfZGlhbG9ndWVFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9oYW5kbGVDbGlja0Nsb3NlIiwiX29wZW5lZENsYXNzIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfYmFja2dyb3VuZENsYXNzIiwiX2Nsb3NlQnV0dG9uQ2xhc3MiLCJEaWFsb2d1ZVdpdGhDb25maXJtYXRpb24iLCJfYnV0dG9uRWxlbWVudCIsIl9idXR0b25TZWxlY3RvciIsImNvbmZpcm1hdGlvbkNhbGxiYWNrIiwiX2NvbmZpcm1hdGlvbkNhbGxiYWNrIiwiRGlhbG9ndWVXaXRoRXJyb3IiLCJfcGFyYWdyYXBoRWxlbWVudCIsIl9wYXJhZ3JhcGhTZWxlY3RvciIsIl9jb3VudGVyRWxlbWVudCIsIl9jb3VudGVyU2VsZWN0b3IiLCJlcnJvck1lc3NhZ2UiLCJfY2xlYXJDb3VudGVyIiwiX2hpZGVBZnRlclNlY29uZHMiLCJfaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiX3RpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJjb25zb2xlIiwiZXJyb3IiLCJjbGVhckludGVydmFsIiwiY2xlYXJUaW1lb3V0IiwiRGlhbG9ndWVXaXRoRm9ybSIsInN1Ym1pc3Npb25DYWxsYmFjayIsIl9mb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfc3VibWlzc2lvbkNhbGxiYWNrIiwiX2hhbmRsZUZvcm1TdWJtaXNzaW9uIiwicmVzZXQiLCJpbnB1dHNMaXN0IiwiaW5wdXROYW1lIiwiZWxlbWVudHMiLCJ2YWx1ZSIsImlzTG9hZGluZyIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiQXJyYXkiLCJmcm9tIiwiaW5wdXRWYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiRGlhbG9ndWVXaXRoSW1hZ2UiLCJfY2FwdGlvbkVsZW1lbnQiLCJfY2FwdGlvblNlbGVjdG9yIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwidmFsaWRhdGlvblNldHRpbmdzIiwiX3ZhbGlkYXRpb25TZXR0aW5ncyIsIl9hbmFseXplRm9ybSIsIl90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSIsIl9pbnB1dHNMaXN0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9tYWtlU3VibWl0QnV0dG9uRGlzYWJsZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfZ2V0SW5wdXRFcnJvckVsZW1lbnQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvclZpc2libGVDbGFzcyIsImVycm9yU2VsZWN0b3IiLCJpbnB1dEVycm9yU2VsZWN0b3IiLCJyZXBsYWNlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9tYWtlU3VibWl0QnV0dG9uQWN0aXZlIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXJDYWxsYmFjayIsIl9jb250YWluZXJFbGVtZW50IiwiX3JlbmRlcmVyQ2FsbGJhY2siLCJpdGVtc0xpc3QiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJhcHBlbmQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsInVuZGVmaW5lZCIsIl9uYW1lRWxlbWVudCIsIl9hYm91dEVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImZvcm1TZWxlY3RvciIsImFwaSIsImNhcmRzQ29udGFpbmVyIiwiY2FyZERhdGEiLCJhZGRFbGVtZW50TGFzdCIsImNyZWF0ZUNhcmQiLCJkaWFsb2d1ZUNhcmRBZGQiLCJzZXRMb2FkaW5nU3RhdGUiLCJhZGRDYXJkIiwiYWRkRWxlbWVudEZpcnN0IiwiY2F0Y2giLCJkaWFsb2d1ZUVycm9yIiwib3BlbiIsImZpbmFsbHkiLCJkaWFsb2d1ZUNhcmRSZW1vdmUiLCJkaWFsb2d1ZUNhcmRWaWV3IiwiZGlhbG9ndWVQcm9maWxlQ2hhbmdlUGljdHVyZSIsInVwZGF0ZVVzZXJBdmF0YXIiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiZGlhbG9ndWVQcm9maWxlRWRpdCIsInVwZGF0ZVVzZXJJbmZvIiwiY2FyZCIsImNhcmRJZCIsImlzTGlrZWQiLCJkaXNsaWtlQ2FyZCIsImxpa2VDYXJkIiwiZGVsZXRlQ2FyZCIsInJlbW92ZUVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImdlbmVyYXRlRWxlbWVudCIsInNldElucHV0VmFsdWVzIiwiYWxsIiwiZ2V0QWxsQ2FyZHMiLCJ1c2VyUmVzcG9uc2UiLCJjYXJkc1Jlc3BvbnNlIiwicmVuZGVySXRlbXMiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==