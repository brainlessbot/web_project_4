!function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t,this._authKey=n}var n,o;return n=e,o=[{key:"getAllCards",value:function(){return this._sendRequest("GET","/cards")}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return this._sendRequest("POST","/cards",{body:JSON.stringify({name:t,link:n})})}},{key:"deleteCard",value:function(e){return this._sendRequest("DELETE","/cards/"+e)}},{key:"likeCard",value:function(e){return this._sendRequest("PUT","/cards/likes/"+e)}},{key:"dislikeCard",value:function(e){return this._sendRequest("DELETE","/cards/likes/"+e)}},{key:"getUserInfo",value:function(){return this._sendRequest("GET","/users/me")}},{key:"updateUserInfo",value:function(e){var t=e.name,n=e.about;return this._sendRequest("PATCH","/users/me",{body:JSON.stringify({name:t,about:n})})}},{key:"updateUserAvatar",value:function(e){var t=e.avatar;return this._sendRequest("PATCH","/users/me/avatar",{body:JSON.stringify({avatar:t})})}},{key:"_sendRequest",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fetch(this._baseUrl+n,t({method:e,headers:{Authorization:this._authKey,"Content-Type":"application/json"}},r)).then(this._checkResponse)}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("An error occurred: ".concat(e.status," ").concat(e.statusText))}}],o&&r(n.prototype,o),e}(),i=o;function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n,r,o){var i=t._id,a=t.name,u=t.link,c=t.likes,s=t.owner,f=r.handleImageClick,h=r.handleLikeClick,p=r.handleRemoveClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_cardSelector",".card"),l(this,"_titleSelector",".card__title"),l(this,"_imageSelector",".card__image"),l(this,"_likeButtonSelector",".card__like-button"),l(this,"_likeCounterSelector",".card__like-counter"),l(this,"_removeButtonSelector",".card__remove-button"),l(this,"_likeButtonActiveClass","card__like-button_active"),this._id=i,this._name=a,this._link=u,this._likes=c,this._owner=s,this._templateSelector=n,this._handleImageClick=f,this._handleLikeClick=h,this._handleRemoveClick=p,this._userId=o}var t,n;return t=e,n=[{key:"generateElement",value:function(){return this._createFromTemplate(),this._setEventListeners(),this._checkPermissions(),this.updateLikes(),this._titleElement.textContent=this._name,this._imageElement.alt=this._name,this._imageElement.src=this._link,this._cardElement}},{key:"removeElement",value:function(){this._cardElement.remove()}},{key:"updateLikes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.likes;this._likes=t||this._likes,this._isLiked()?this._markLiked():this._markDisliked(),this._likeCounterElement.textContent=this._likes.length}},{key:"_createFromTemplate",value:function(){this._cardElement=document.querySelector(this._templateSelector).content.querySelector(this._cardSelector).cloneNode(!0),this._titleElement=this._cardElement.querySelector(this._titleSelector),this._imageElement=this._cardElement.querySelector(this._imageSelector),this._likeButtonElement=this._cardElement.querySelector(this._likeButtonSelector),this._likeCounterElement=this._cardElement.querySelector(this._likeCounterSelector),this._removeButtonElement=this._cardElement.querySelector(this._removeButtonSelector)}},{key:"_setEventListeners",value:function(){var e=this;this._imageElement.addEventListener("click",this._handleImageClick),this._likeButtonElement.addEventListener("click",(function(){return e._handleLikeClick(e._id,e._isLiked())})),this._removeButtonElement.addEventListener("click",(function(){return e._handleRemoveClick(e._id)}))}},{key:"_checkPermissions",value:function(){this._owner._id!==this._userId&&this._removeButtonElement.remove()}},{key:"_isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"_markLiked",value:function(){this._likeButtonElement.classList.add(this._likeButtonActiveClass)}},{key:"_markDisliked",value:function(){this._likeButtonElement.classList.remove(this._likeButtonActiveClass)}}],n&&a(t.prototype,n),e}(),c=u;function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_backgroundClass","dialogue"),f(this,"_closeButtonClass","dialogue__close-button"),f(this,"_openedClass","dialogue_opened"),this._dialogueElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._handleClickClose=this._handleClickClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._dialogueElement.classList.add(this._openedClass),this.setEventListeners()}},{key:"close",value:function(){this._dialogueElement.classList.remove(this._openedClass),this.removeEventListeners()}},{key:"setEventListeners",value:function(){document.addEventListener("keydown",this._handleEscClose),this._dialogueElement.addEventListener("click",this._handleClickClose)}},{key:"removeEventListeners",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._dialogueElement.removeEventListener("click",this._handleClickClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleClickClose",value:function(e){(e.target.classList.contains(this._backgroundClass)||e.target.classList.contains(this._closeButtonClass))&&this.close()}}])&&s(t.prototype,n),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=y(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},m.apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function a(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o=".dialogue__submit-button",(r="_buttonSelector")in(n=b(t=i.call(this,e)))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t._buttonElement=t._dialogueElement.querySelector(t._buttonSelector),t}return t=a,(n=[{key:"open",value:function(e){this._confirmationCallback=e,m(g(a.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){m(g(a.prototype),"setEventListeners",this).call(this),this._buttonElement.addEventListener("click",this._confirmationCallback)}},{key:"removeEventListeners",value:function(){m(g(a.prototype),"removeEventListeners",this).call(this),this._buttonElement.removeEventListener("click",this._confirmationCallback)}}])&&d(t.prototype,n),a}(h);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},O.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function j(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),R(P(t=i.call(this,e)),"_hideAfterSeconds",5),R(P(t),"_paragraphSelector",".dialogue__paragraph_primary"),R(P(t),"_counterSelector",".dialogue__paragraph_counter"),t._paragraphElement=t._dialogueElement.querySelector(t._paragraphSelector),t._counterElement=t._dialogueElement.querySelector(t._counterSelector),t}return t=a,(n=[{key:"open",value:function(e){var t=this;O(L(a.prototype),"open",this).call(this),this._paragraphElement.textContent=e,this._counterElement.textContent=this._hideAfterSeconds,this._intervalId=setInterval((function(){t._counterElement.textContent-=1}),1e3),this._timeoutId=setTimeout((function(){return t.close()}),1e3*this._hideAfterSeconds),console.error(e)}},{key:"close",value:function(){O(L(a.prototype),"close",this).call(this),clearInterval(this._intervalId),clearTimeout(this._timeoutId)}}])&&S(t.prototype,n),a}(h);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=A(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(this,arguments)}function A(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function D(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(r);if(o){var n=F(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),V(U(n=i.call(this,e)),"_formSelector",".dialogue__form"),V(U(n),"_buttonSelector",".dialogue__submit-button"),n._formElement=n._dialogueElement.querySelector(n._formSelector),n._buttonElement=n._dialogueElement.querySelector(n._buttonSelector),n._submissionCallback=t,n._handleFormSubmission=n._handleFormSubmission.bind(U(n)),n}return t=a,(n=[{key:"close",value:function(){T(F(a.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setInputValues",value:function(e){for(var t in e)this._formElement.elements[t]&&(this._formElement.elements[t].value=e[t])}},{key:"setLoadingState",value:function(e){this._buttonElement.textContent=e?"Saving...":"Save"}},{key:"setEventListeners",value:function(){T(F(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",this._handleFormSubmission)}},{key:"removeEventListeners",value:function(){T(F(a.prototype),"removeEventListeners",this).call(this),this._formElement.removeEventListener("submit",this._handleFormSubmission)}},{key:"_handleFormSubmission",value:function(e){e.preventDefault(),this._submissionCallback(this._getInputValues())}},{key:"_getInputValues",value:function(){var e=Array.from(this._formElement.elements),t={};return e.forEach((function(e){t[e.name]=e.value})),t}}])&&q(t.prototype,n),a}(h);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=H(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},G.apply(this,arguments)}function H(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function M(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Q(r);if(o){var n=Q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return M(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),W($(t=i.call(this,e)),"_imageSelector",".dialogue__image"),W($(t),"_captionSelector",".dialogue__caption"),t._imageElement=t._dialogueElement.querySelector(t._imageSelector),t._captionElement=t._dialogueElement.querySelector(t._captionSelector),t}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;G(Q(a.prototype),"open",this).call(this),this._imageElement.alt=t,this._imageElement.src=n,this._captionElement.textContent=t}}])&&J(t.prototype,n),a}(h);function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Z=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=t,this._validationSettings=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){var e=this;this._analyzeForm(),this._toggleSubmitButtonState(),this._inputsList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleSubmitButtonState()}))})),this._formElement.addEventListener("reset",(function(){return e._makeSubmitButtonDisabled()}))}},{key:"_analyzeForm",value:function(){this._inputsList=Array.from(this._formElement.querySelectorAll(this._validationSettings.inputSelector)),this._submitButtonElement=this._formElement.querySelector(this._validationSettings.submitButtonSelector)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._getInputErrorElement(e);e.classList.add(this._validationSettings.inputErrorClass),n.classList.add(this._validationSettings.errorVisibleClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._getInputErrorElement(e);e.classList.remove(this._validationSettings.inputErrorClass),t.classList.remove(this._validationSettings.errorVisibleClass),t.textContent=null}},{key:"_getInputErrorElement",value:function(e){var t=this._validationSettings.inputErrorSelector.replace("%formId",this._formElement.id).replace("%inputName",e.name);return this._formElement.querySelector(t)}},{key:"_toggleSubmitButtonState",value:function(){this._hasInvalidInput()?this._makeSubmitButtonDisabled():this._makeSubmitButtonActive()}},{key:"_hasInvalidInput",value:function(){return this._inputsList.some((function(e){return!e.validity.valid}))}},{key:"_makeSubmitButtonActive",value:function(){this._submitButtonElement.classList.remove(this._validationSettings.inactiveButtonClass),this._submitButtonElement.disabled=!1}},{key:"_makeSubmitButtonDisabled",value:function(){this._submitButtonElement.classList.add(this._validationSettings.inactiveButtonClass),this._submitButtonElement.disabled=!0}}])&&Y(t.prototype,n),e}(),ee=Z;function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._containerElement=document.querySelector(t),this._rendererCallback=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._rendererCallback(e)}))}},{key:"addElementFirst",value:function(e){this._containerElement.prepend(e)}},{key:"addElementLast",value:function(e){this._containerElement.append(e)}}])&&te(t.prototype,n),e}();function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var oe=function(){function e(t){var n,r=t.nameSelector,o=t.aboutSelector,i=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=void 0,"_id"in this?Object.defineProperty(this,"_id",{value:n,enumerable:!0,configurable:!0,writable:!0}):this._id=n,this._nameElement=document.querySelector(r),this._aboutElement=document.querySelector(o),this._avatarElement=document.querySelector(i)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{id:this._id,name:this._nameElement.textContent,about:this._aboutElement.textContent,avatar:this._avatarElement.src}}},{key:"setUserInfo",value:function(e){var t=e._id,n=e.name,r=e.about,o=e.avatar;this._id=t||this._id,this._nameElement.textContent=n,this._aboutElement.textContent=r,this._avatarElement.src=o}}])&&re(t.prototype,n),e}(),ie={formSelector:".dialogue__form",inputSelector:".dialogue__form-field",inputErrorSelector:".%formId-%inputName-error",submitButtonSelector:".dialogue__submit-button",inactiveButtonClass:"dialogue__submit-button_disabled",inputErrorClass:"dialogue__form-field_has-error",errorVisibleClass:"dialogue__form-error_visible"};function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=new i("https://around.nomoreparties.co/v1/group-12","190e9486-cf84-4370-aa42-80831152ad82"),fe=new ne(".cards__list",(function(e){return fe.addElementLast(be(e))})),he=new N(".dialogue_type_card-add",(function(e){he.setLoadingState(!0),se.addCard(e).then((function(e){fe.addElementFirst(be(e)),he.close()})).catch((function(e){return me.open(e)})).finally((function(){return he.setLoadingState(!1)}))})),pe=new E(".dialogue_type_card-remove"),de=new X(".dialogue_type_card-view"),me=new I(".dialogue_type_error"),ye=new N(".dialogue_type_profile-change-picture",(function(e){ye.setLoadingState(!0),se.updateUserAvatar(e).then((function(e){ve.setUserInfo(e),ye.close()})).catch((function(e){return me.open(e)})).finally((function(){return ye.setLoadingState(!1)}))})),_e=new N(".dialogue_type_profile-edit",(function(e){_e.setLoadingState(!0),se.updateUserInfo(e).then((function(e){ve.setUserInfo(e),_e.close()})).catch((function(e){return me.open(e)})).finally((function(){return _e.setLoadingState(!1)}))})),ve=new oe({nameSelector:".profile__title-text",aboutSelector:".profile__subtitle",avatarSelector:".profile__avatar-image"}),be=function(e){var t=new c(e,"#card-template",{handleImageClick:function(){return de.open(e)},handleLikeClick:function(e,n){n?se.dislikeCard(e).then((function(e){return t.updateLikes(e)})).catch((function(e){return me.open(e)})):se.likeCard(e).then((function(e){return t.updateLikes(e)})).catch((function(e){return me.open(e)}))},handleRemoveClick:function(e){pe.open((function(){se.deleteCard(e).then((function(){t.removeElement(),pe.close()})).catch((function(e){return me.open(e)}))}))}},ve.getUserInfo().id);return t.generateElement()};document.querySelector(".profile__add-button").addEventListener("click",(function(){return he.open()})),document.querySelector(".profile__avatar-overlay").addEventListener("click",(function(){return ye.open()})),document.querySelector(".profile__edit-button").addEventListener("click",(function(){_e.setInputValues(ve.getUserInfo()),_e.open()})),ve.setUserInfo(ue(ue({},ve.getUserInfo()),{},{name:"Loading..."})),Promise.all([se.getUserInfo(),se.getAllCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ve.setUserInfo(o),fe.renderItems(i)})).catch((function(e){return me.open(e)})),Array.from(document.querySelectorAll(ie.formSelector)).forEach((function(e){new ee(e,ie).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUtNLGdCQUNMZCxHQUFtQjVHLFdBRXRCd0csT0FBTSxTQUFBbEYsR0FBSyxPQUFJbUYsR0FBY0MsS0FBS3BGLFdBSW5EMEYsR0FBU1csY0FBYzVNLElBRzNCLE9BQU9xTSxFQUFLUSxtQkFVTTFKLFNBQVNDLGNEaE9NLHdCQ2lPdkJXLGlCQUFpQixTQUFTLGtCQUFNc0gsR0FBZ0JNLFVBRzNCeEksU0FBU0MsY0RuT00sNEJDb092QlcsaUJBQWlCLFNBQVMsa0JBQU1nSSxHQUE2QkosVUFHOUR4SSxTQUFTQyxjRHRPTSx5QkN1T3ZCVyxpQkFBaUIsU0FBUyxXQUN4Q29JLEdBQW9CVyxlQUFlYixHQUFTVyxlQUM1Q1QsR0FBb0JSLFVBdkZwQk0sR0FBU0MsWUFBVCxTQUNPRCxHQUFTVyxlQURoQixJQUVJak4sS0FBTSxnQkFJVmtCLFFBQ0trTSxJQUFJLENBQUMvQixHQUFJNEIsY0FBZTVCLEdBQUlnQyxnQkFDNUJ4TSxNQUFLLFlBQW1DLEksSUFBQSxHLEVBQUEsRSw0Q0FBQSxJLGt4QkFBakN5TSxFQUFpQyxLQUFuQkMsRUFBbUIsS0FDckNqQixHQUFTQyxZQUFZZSxHQUNyQmhDLEdBQWVrQyxZQUFZRCxNQUU5QnpCLE9BQU0sU0FBQWxGLEdBQUssT0FBSW1GLEdBQWNDLEtBQUtwRixNQVNyQmlCLE1BQU1DLEtBQUt0RSxTQUFTc0YsaUJBQWlCUCxHQUFtQjZDLGVBRWhFcEQsU0FBUSxTQUFBTSxHQUNPLElBQUlELEdBQWNDLEVBQWFDLElBQ3ZDa0Ysc0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9EaWFsb2d1ZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9EaWFsb2d1ZVdpdGhFcnJvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbGl0aWVzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFwaSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhbiBBcGkgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVybFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRoS2V5XG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGJhc2VVcmwsIGF1dGhLZXkpIHtcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgICAgIHRoaXMuX2F1dGhLZXkgPSBhdXRoS2V5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgY2FyZHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0QWxsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdCgnR0VUJywgJy9jYXJkcycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG5ldyBjYXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGlua1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBhZGRDYXJkKHtuYW1lLCBsaW5rfSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2NhcmRzJywge1xuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe25hbWUsIGxpbmt9KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBzcGVjaWZpYyBjYXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGRlbGV0ZUNhcmQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdERUxFVEUnLCAnL2NhcmRzLycgKyBpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlrZSBhIHNwZWNpZmljIGNhcmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgbGlrZUNhcmQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdQVVQnLCAnL2NhcmRzL2xpa2VzLycgKyBpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzbGlrZSBhIHNwZWNpZmljIGNhcmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZGlzbGlrZUNhcmQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdERUxFVEUnLCAnL2NhcmRzL2xpa2VzLycgKyBpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHVzZXIncyBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdHRVQnLCAnL3VzZXJzL21lJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHVzZXIncyBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFib3V0XG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHVwZGF0ZVVzZXJJbmZvKHtuYW1lLCBhYm91dH0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdQQVRDSCcsICcvdXNlcnMvbWUnLCB7XG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7bmFtZSwgYWJvdXR9KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdXNlcidzIGF2YXRhci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdmF0YXJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdXBkYXRlVXNlckF2YXRhcih7YXZhdGFyfSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QoJ1BBVENIJywgJy91c2Vycy9tZS9hdmF0YXInLCB7XG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7YXZhdGFyfSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHNlbmRpbmcgdGhlIHJlcXVlc3QgdG8gdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0VXJsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9zZW5kUmVxdWVzdChtZXRob2QsIHRhcmdldFVybCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgdGFyZ2V0VXJsLCB7XG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiB0aGlzLl9hdXRoS2V5LFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNoZWNraW5nIHRoZSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Byb21pc2V9IHJlc3BvbnNlXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfY2hlY2tSZXNwb25zZShyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEFuIGVycm9yIG9jY3VycmVkOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiY2xhc3MgQ2FyZCB7XG4gICAgLy8gU2VsZWN0b3JzIGFuZCBjbGFzc2VzXG4gICAgX2NhcmRTZWxlY3RvciA9ICcuY2FyZCc7XG4gICAgX3RpdGxlU2VsZWN0b3IgPSAnLmNhcmRfX3RpdGxlJztcbiAgICBfaW1hZ2VTZWxlY3RvciA9ICcuY2FyZF9faW1hZ2UnO1xuICAgIF9saWtlQnV0dG9uU2VsZWN0b3IgPSAnLmNhcmRfX2xpa2UtYnV0dG9uJztcbiAgICBfbGlrZUNvdW50ZXJTZWxlY3RvciA9ICcuY2FyZF9fbGlrZS1jb3VudGVyJztcbiAgICBfcmVtb3ZlQnV0dG9uU2VsZWN0b3IgPSAnLmNhcmRfX3JlbW92ZS1idXR0b24nO1xuICAgIF9saWtlQnV0dG9uQWN0aXZlQ2xhc3MgPSAnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBjYXJkIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9pZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxpbmtcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaWtlc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvd25lclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZVNlbGVjdG9yXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlSW1hZ2VDbGlja1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZUxpa2VDbGlja1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZVJlbW92ZUNsaWNrXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAge19pZCwgbmFtZSwgbGluaywgbGlrZXMsIG93bmVyfSxcbiAgICAgICAgdGVtcGxhdGVTZWxlY3RvcixcbiAgICAgICAge2hhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlUmVtb3ZlQ2xpY2t9LFxuICAgICAgICB1c2VySWRcbiAgICApIHtcbiAgICAgICAgLy8gQ2FyZCdzIGluZm9ybWF0aW9uXG4gICAgICAgIHRoaXMuX2lkID0gX2lkO1xuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XG4gICAgICAgIHRoaXMuX293bmVyID0gb3duZXI7XG5cbiAgICAgICAgLy8gQ2FyZCdzIHRlbXBsYXRlXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsaW5nIGNhbGxiYWNrc1xuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVDbGljayA9IGhhbmRsZVJlbW92ZUNsaWNrO1xuXG4gICAgICAgIC8vIFRoZSBpZCBvZiB0aGUgbG9nZ2VkLWluIHVzZXJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGEgY2FyZCBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybnMge0VsZW1lbnR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdlbmVyYXRlRWxlbWVudCgpIHtcbiAgICAgICAgdGhpcy5fY3JlYXRlRnJvbVRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2NoZWNrUGVybWlzc2lvbnMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVMaWtlcygpO1xuXG4gICAgICAgIC8vIENhcmQncyB0aXRsZVxuICAgICAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgICAgIC8vIENhcmQncyBpbWFnZVxuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGNhcmQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICByZW1vdmVFbGVtZW50KCkge1xuICAgICAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGxpa2VzIG9mIHRoZSBjYXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlrZXNcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdXBkYXRlTGlrZXMoe2xpa2VzfSA9IHt9KSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYW4gdXBkYXRlZCByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBsaWtlcyB8fCB0aGlzLl9saWtlcztcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgbG9nZ2VkLWluIHVzZXIgaGFzIGxpa2VkIHRoZSBjYXJkLCBhbmQgY2hhbmdlIGl0cycgc3RhdGUgYWNjb3JkaW5nbHlcbiAgICAgICAgdGhpcy5faXNMaWtlZCgpID8gdGhpcy5fbWFya0xpa2VkKCkgOiB0aGlzLl9tYXJrRGlzbGlrZWQoKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIGNvdW50ZXJcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50ZXJFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNhcmQgZWxlbWVudCBmcm9tIGRlZmluZWQgdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jcmVhdGVGcm9tVGVtcGxhdGUoKSB7XG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAgICAgICAuY29udGVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgICAgICB0aGlzLl90aXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RpdGxlU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2ltYWdlU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbGlrZUJ1dHRvblNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50ZXJFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9saWtlQ291bnRlclNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlQnV0dG9uRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcmVtb3ZlQnV0dG9uU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBldmVudCBsaXN0ZW5lcnMgZm9yIGNhcmQncyBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2spO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9pZCwgdGhpcy5faXNMaWtlZCgpKSk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVSZW1vdmVDbGljayh0aGlzLl9pZCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIGN1cnJlbnRseSBsb2dnZWQtaW4gdXNlciBpcyB0aGUgb3duZXIgb2YgdGhlIGNhcmQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jaGVja1Blcm1pc3Npb25zKCkge1xuICAgICAgICAvLyBJZiBub3QsIGRpc2FibGUgdGhlIHJlbW92ZSBidXR0b25cbiAgICAgICAgaWYgKHRoaXMuX293bmVyLl9pZCAhPT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVCdXR0b25FbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgY3VycmVudGx5IGxvZ2dlZC1pbiB1c2VyIGhhcyBsaWtlZCB0aGUgY2FyZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2lzTGlrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKHVzZXJEYXRhID0+IHVzZXJEYXRhLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrIHRoZSBjYXJkIGFzIGxpa2VkLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbWFya0xpa2VkKCkge1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2xpa2VCdXR0b25BY3RpdmVDbGFzcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFyayB0aGUgY2FyZCBhcyBkaXNsaWtlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX21hcmtEaXNsaWtlZCgpIHtcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9saWtlQnV0dG9uQWN0aXZlQ2xhc3MpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIERpYWxvZ3VlIHtcbiAgICAvLyBTZWxlY3RvcnMgYW5kIGNsYXNzZXNcbiAgICBfYmFja2dyb3VuZENsYXNzID0gJ2RpYWxvZ3VlJztcbiAgICBfY2xvc2VCdXR0b25DbGFzcyA9ICdkaWFsb2d1ZV9fY2xvc2UtYnV0dG9uJztcbiAgICBfb3BlbmVkQ2xhc3MgPSAnZGlhbG9ndWVfb3BlbmVkJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBkaWFsb2d1ZSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkaWFsb2d1ZVNlbGVjdG9yXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRpYWxvZ3VlU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkaWFsb2d1ZVNlbGVjdG9yKTtcblxuICAgICAgICAvLyBCaW5kIHRoZSBjdXJyZW50IGluc3RhbmNlIHRvIHRoZSBldmVudCBoYW5kbGVyc1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UgPSB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbiB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb3BlbmVkQ2xhc3MpO1xuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9kaWFsb2d1ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcGVuZWRDbGFzcyk7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBmcm9tIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNsb3NpbmcgdGhlIGRpYWxvZ3VlIGlmIFwiZXNjYXBlXCIgd2FzIHByZXNzZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgICAgIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSAmJiB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNsb3NpbmcgdGhlIGRpYWxvZ3VlIGlmIHRoZSB1c2VyIGNsaWNrZWQgb24gdGhlIGJhY2tncm91bmQgLyB0aGUgY2xvc2UgYnV0dG9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9oYW5kbGVDbGlja0Nsb3NlKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuX2JhY2tncm91bmRDbGFzcykgfHxcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fY2xvc2VCdXR0b25DbGFzcykpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGlhbG9ndWU7XG4iLCJpbXBvcnQgRGlhbG9ndWUgZnJvbSAnLi9EaWFsb2d1ZSc7XG5cbmNsYXNzIERpYWxvZ3VlV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIERpYWxvZ3VlIHtcbiAgICAvLyBTZWxlY3RvcnMgYW5kIGNsYXNzZXNcbiAgICBfYnV0dG9uU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX19zdWJtaXQtYnV0dG9uJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBkaWFsb2d1ZSB3aXRoIGFsZXJ0IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRpYWxvZ3VlU2VsZWN0b3JcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGlhbG9ndWVTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihkaWFsb2d1ZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2RpYWxvZ3VlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2J1dHRvblNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVuIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmZpcm1hdGlvbkNhbGxiYWNrXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG9wZW4oY29uZmlybWF0aW9uQ2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fY29uZmlybWF0aW9uQ2FsbGJhY2sgPSBjb25maXJtYXRpb25DYWxsYmFjaztcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBldmVudCBsaXN0ZW5lcnMgdG8gdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY29uZmlybWF0aW9uQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZnJvbSB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jb25maXJtYXRpb25DYWxsYmFjayk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEaWFsb2d1ZVdpdGhDb25maXJtYXRpb247XG4iLCJpbXBvcnQgRGlhbG9ndWUgZnJvbSAnLi9EaWFsb2d1ZSc7XG5cbmNsYXNzIERpYWxvZ3VlV2l0aEVycm9yIGV4dGVuZHMgRGlhbG9ndWUge1xuICAgIC8vIENvbmZpZ3VyYXRpb25cbiAgICBfaGlkZUFmdGVyU2Vjb25kcyA9IDU7XG5cbiAgICAvLyBTZWxlY3RvcnMgYW5kIGNsYXNzZXNcbiAgICBfcGFyYWdyYXBoU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX19wYXJhZ3JhcGhfcHJpbWFyeSc7XG4gICAgX2NvdW50ZXJTZWxlY3RvciA9ICcuZGlhbG9ndWVfX3BhcmFncmFwaF9jb3VudGVyJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBkaWFsb2d1ZSB3aXRoIGVycm9yIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRpYWxvZ3VlU2VsZWN0b3JcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGlhbG9ndWVTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihkaWFsb2d1ZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcGFyYWdyYXBoRWxlbWVudCA9IHRoaXMuX2RpYWxvZ3VlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BhcmFncmFwaFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fY291bnRlckVsZW1lbnQgPSB0aGlzLl9kaWFsb2d1ZUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb3VudGVyU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW4gdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yTWVzc2FnZVxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBvcGVuKGVycm9yTWVzc2FnZSkge1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgICAgIHRoaXMuX3BhcmFncmFwaEVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG5cbiAgICAgICAgLy8gUmVzZXQgdGhlIGNvdW50ZXIsIGFuZCB1cGRhdGUgaXQgZXZlcnkgc2Vjb25kXG4gICAgICAgIHRoaXMuX2NvdW50ZXJFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5faGlkZUFmdGVyU2Vjb25kcztcbiAgICAgICAgdGhpcy5faW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2NvdW50ZXJFbGVtZW50LnRleHRDb250ZW50IC09IDE7XG4gICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgIC8vIEhpZGUgdGhlIGVycm9yIGFmdGVyIDUgc2Vjb25kcywgYW5kIGRpc2FibGUgdGhlIGNvdW50ZXJcbiAgICAgICAgdGhpcy5fdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLmNsb3NlKCksIHRoaXMuX2hpZGVBZnRlclNlY29uZHMgKiAxMDAwKTtcblxuICAgICAgICAvLyBJbiBhZGRpdGlvbiB0byB0aGUgZGlhbG9ndWUsIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbElkKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRJZCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEaWFsb2d1ZVdpdGhFcnJvcjtcbiIsImltcG9ydCBEaWFsb2d1ZSBmcm9tICcuL0RpYWxvZ3VlJztcblxuY2xhc3MgRGlhbG9ndWVXaXRoRm9ybSBleHRlbmRzIERpYWxvZ3VlIHtcbiAgICAvLyBTZWxlY3RvcnMgYW5kIGNsYXNzZXNcbiAgICBfZm9ybVNlbGVjdG9yID0gJy5kaWFsb2d1ZV9fZm9ybSc7XG4gICAgX2J1dHRvblNlbGVjdG9yID0gJy5kaWFsb2d1ZV9fc3VibWl0LWJ1dHRvbic7XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgZGlhbG9ndWUgd2l0aCBmb3JtIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRpYWxvZ3VlU2VsZWN0b3JcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdWJtaXNzaW9uQ2FsbGJhY2tcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGlhbG9ndWVTZWxlY3Rvciwgc3VibWlzc2lvbkNhbGxiYWNrKSB7XG4gICAgICAgIHN1cGVyKGRpYWxvZ3VlU2VsZWN0b3IpO1xuXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fZGlhbG9ndWVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZm9ybVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2RpYWxvZ3VlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2J1dHRvblNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fc3VibWlzc2lvbkNhbGxiYWNrID0gc3VibWlzc2lvbkNhbGxiYWNrO1xuXG4gICAgICAgIC8vIEJpbmQgdGhlIGN1cnJlbnQgaW5zdGFuY2UgdG8gdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pc3Npb24gPSB0aGlzLl9oYW5kbGVGb3JtU3VibWlzc2lvbi5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgZGVmYXVsdCBpbnB1dCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRzTGlzdFxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzZXRJbnB1dFZhbHVlcyhpbnB1dHNMaXN0KSB7XG4gICAgICAgIGZvciAoY29uc3QgaW5wdXROYW1lIGluIGlucHV0c0xpc3QpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9mb3JtRWxlbWVudC5lbGVtZW50c1tpbnB1dE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuZWxlbWVudHNbaW5wdXROYW1lXS52YWx1ZSA9IGlucHV0c0xpc3RbaW5wdXROYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBsb2FkaW5nIHN0YXRlOyB1c2VkIHdoZW4gd2FpdGluZyBmb3IgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpc0xvYWRpbmdcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2V0TG9hZGluZ1N0YXRlKGlzTG9hZGluZykge1xuICAgICAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LnRleHRDb250ZW50ID0gJ1NhdmluZy4uLic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LnRleHRDb250ZW50ID0gJ1NhdmUnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGV2ZW50IGxpc3RlbmVycyB0byB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXNzaW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzIGZyb20gdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9oYW5kbGVGb3JtU3VibWlzc2lvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHRoZSBzdWJtaXNzaW9uIG9mIHRoZSBmb3JtLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9oYW5kbGVGb3JtU3VibWlzc2lvbihldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLl9zdWJtaXNzaW9uQ2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBpbnB1dCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dHNMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5lbGVtZW50cyk7XG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG5cbiAgICAgICAgaW5wdXRzTGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XG4gICAgICAgICAgICBpbnB1dFZhbHVlc1tpbnB1dEVsZW1lbnQubmFtZV0gPSBpbnB1dEVsZW1lbnQudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERpYWxvZ3VlV2l0aEZvcm07XG4iLCJpbXBvcnQgRGlhbG9ndWUgZnJvbSAnLi9EaWFsb2d1ZSc7XG5cbmNsYXNzIERpYWxvZ3VlV2l0aEltYWdlIGV4dGVuZHMgRGlhbG9ndWUge1xuICAgIC8vIFNlbGVjdG9ycyBhbmQgY2xhc3Nlc1xuICAgIF9pbWFnZVNlbGVjdG9yID0gJy5kaWFsb2d1ZV9faW1hZ2UnO1xuICAgIF9jYXB0aW9uU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX19jYXB0aW9uJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBkaWFsb2d1ZSB3aXRoIGltYWdlIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRpYWxvZ3VlU2VsZWN0b3JcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGlhbG9ndWVTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihkaWFsb2d1ZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fZGlhbG9ndWVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5faW1hZ2VTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2NhcHRpb25FbGVtZW50ID0gdGhpcy5fZGlhbG9ndWVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FwdGlvblNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVuIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxpbmtcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgb3Blbih7bmFtZSwgbGlua30pIHtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuXG4gICAgICAgIC8vIERpYWxvZ3VlJ3MgaW1hZ2VcbiAgICAgICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBsaW5rO1xuXG4gICAgICAgIC8vIERpYWxvZ3VlJ3MgY2FwdGlvblxuICAgICAgICB0aGlzLl9jYXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEaWFsb2d1ZVdpdGhJbWFnZTtcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBmb3JtIHZhbGlkYXRvciBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZm9ybUVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsaWRhdGlvblNldHRpbmdzXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCB2YWxpZGF0aW9uU2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICAgICAgdGhpcy5fdmFsaWRhdGlvblNldHRpbmdzID0gdmFsaWRhdGlvblNldHRpbmdzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZSBmb3JtIHZhbGlkYXRpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fYW5hbHl6ZUZvcm0oKTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUoKTtcblxuICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSBpbnB1dHMgbGlzdCwgYW5kIGF0dGFjaCB0byBlYWNoIGFuIGV2ZW50IGxpc3RlbmVyIHdoaWNoIHdhdGNoZXMgZm9yIGNoYW5nZXNcbiAgICAgICAgdGhpcy5faW5wdXRzTGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBNYWtlIHRoZSBzdWJtaXQgYnV0dG9uIGRpc2FibGVkIGFnYWluIGFmdGVyIHRoZSBmb3JtIGlzIHJlc2V0XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2V0JywgKCkgPT4gdGhpcy5fbWFrZVN1Ym1pdEJ1dHRvbkRpc2FibGVkKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFuYWx5emUgdGhlIHBhc3NlZCBmb3JtIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9hbmFseXplRm9ybSgpIHtcbiAgICAgICAgLy8gR2V0IGFsbCB0aGUgaW5wdXRzXG4gICAgICAgIHRoaXMuX2lucHV0c0xpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmlucHV0U2VsZWN0b3IpKTtcblxuICAgICAgICAvLyBHZXQgdGhlIHN1Ym1pdCBidXR0b25cbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciBhbiBpbnB1dCBoYXMgYW4gZXJyb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGlucHV0RWxlbWVudFxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIGFuIGlucHV0IGVycm9yIHZpc2libGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGlucHV0RWxlbWVudFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvck1lc3NhZ2VcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9nZXRJbnB1dEVycm9yRWxlbWVudChpbnB1dEVsZW1lbnQpO1xuXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3MuZXJyb3JWaXNpYmxlQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFrZSBhbiBpbnB1dCBlcnJvciBoaWRkZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5wdXRFbGVtZW50XG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2dldElucHV0RXJyb3JFbGVtZW50KGlucHV0RWxlbWVudCk7XG5cbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5lcnJvclZpc2libGVDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgdGhlIGVycm9yIGVsZW1lbnQgb2YgYSBzcGVjaWZpYyBpbnB1dCBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBpbnB1dEVsZW1lbnRcbiAgICAgKiBAcmV0dXJucyB7RWxlbWVudH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9nZXRJbnB1dEVycm9yRWxlbWVudChpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JTZWxlY3RvciA9IHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5pbnB1dEVycm9yU2VsZWN0b3JcbiAgICAgICAgICAgIC5yZXBsYWNlKCclZm9ybUlkJywgdGhpcy5fZm9ybUVsZW1lbnQuaWQpXG4gICAgICAgICAgICAucmVwbGFjZSgnJWlucHV0TmFtZScsIGlucHV0RWxlbWVudC5uYW1lKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihlcnJvclNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgdGhlIHN0YXRlIG9mIHRoZSBzdWJtaXQgYnV0dG9uIChhY3RpdmUgLyBkaXNhYmxlZCkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpIHtcbiAgICAgICAgdGhpcy5faGFzSW52YWxpZElucHV0KCkgPyB0aGlzLl9tYWtlU3VibWl0QnV0dG9uRGlzYWJsZWQoKSA6IHRoaXMuX21ha2VTdWJtaXRCdXR0b25BY3RpdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayB3aGV0aGVyIGFsbCBpbnB1dHMgYXJlIHZhbGlkLlxuICAgICAqXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRzTGlzdC5zb21lKGlucHV0RWxlbWVudCA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIHRoZSBzdWJtaXQgYnV0dG9uIGFjdGl2ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX21ha2VTdWJtaXRCdXR0b25BY3RpdmUoKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIHRoZSBzdWJtaXQgYnV0dG9uIGRpc2FibGVkLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbWFrZVN1Ym1pdEJ1dHRvbkRpc2FibGVkKCkge1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJjbGFzcyBTZWN0aW9uIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplIGEgc2VjdGlvbiBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb250YWluZXJTZWxlY3RvclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlbmRlcmVyQ2FsbGJhY2tcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyU2VsZWN0b3IsIHJlbmRlcmVyQ2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9yZW5kZXJlckNhbGxiYWNrID0gcmVuZGVyZXJDYWxsYmFjaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgaXRlbXMgZnJvbSBsaXN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHJlbmRlckl0ZW1zKGl0ZW1zTGlzdCkge1xuICAgICAgICBpdGVtc0xpc3QuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyQ2FsbGJhY2soaXRlbSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBlbGVtZW50IHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHNlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgYWRkRWxlbWVudEZpcnN0KGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyRWxlbWVudC5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhbiBlbGVtZW50IHRvIHRoZSBlbmQgb2YgdGhlIHNlY3Rpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgYWRkRWxlbWVudExhc3QoZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXJFbGVtZW50LmFwcGVuZChlbGVtZW50KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gICAgLy8gRGVmYXVsdCBpbmZvcm1hdGlvblxuICAgIF9pZCA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSB1c2VyIGluZm8gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVNlbGVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFib3V0U2VsZWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXZhdGFyU2VsZWN0b3JcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioe25hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3J9KSB7XG4gICAgICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9hYm91dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgdXNlcidzIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdGhpcy5faWQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGFib3V0OiB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICAgICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHVzZXIncyBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBfaWRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhYm91dFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdmF0YXJcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2V0VXNlckluZm8oe19pZCwgbmFtZSwgYWJvdXQsIGF2YXRhcn0pIHtcbiAgICAgICAgdGhpcy5faWQgPSBfaWQgfHwgdGhpcy5faWQ7XG4gICAgICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XG4iLCJleHBvcnQgY29uc3QgYXBpQmFzZVVybCA9ICdodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyJztcbmV4cG9ydCBjb25zdCBhcGlBdXRoS2V5ID0gJzE5MGU5NDg2LWNmODQtNDM3MC1hYTQyLTgwODMxMTUyYWQ4Mic7XG5cbmV4cG9ydCBjb25zdCBidXR0b25DYXJkQWRkU2VsZWN0b3IgPSAnLnByb2ZpbGVfX2FkZC1idXR0b24nO1xuZXhwb3J0IGNvbnN0IGJ1dHRvblByb2ZpbGVDaGFuZ2VQaWN0dXJlU2VsZWN0b3IgPSAnLnByb2ZpbGVfX2F2YXRhci1vdmVybGF5JztcbmV4cG9ydCBjb25zdCBidXR0b25Qcm9maWxlRWRpdFNlbGVjdG9yID0gJy5wcm9maWxlX19lZGl0LWJ1dHRvbic7XG5cbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lclNlbGVjdG9yID0gJy5jYXJkc19fbGlzdCc7XG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlU2VsZWN0b3IgPSAnI2NhcmQtdGVtcGxhdGUnO1xuXG5leHBvcnQgY29uc3QgZGlhbG9ndWVDYXJkQWRkU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX3R5cGVfY2FyZC1hZGQnO1xuZXhwb3J0IGNvbnN0IGRpYWxvZ3VlQ2FyZFJlbW92ZVNlbGVjdG9yID0gJy5kaWFsb2d1ZV90eXBlX2NhcmQtcmVtb3ZlJztcbmV4cG9ydCBjb25zdCBkaWFsb2d1ZUNhcmRWaWV3U2VsZWN0b3IgPSAnLmRpYWxvZ3VlX3R5cGVfY2FyZC12aWV3JztcbmV4cG9ydCBjb25zdCBkaWFsb2d1ZUVycm9yU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX3R5cGVfZXJyb3InO1xuZXhwb3J0IGNvbnN0IGRpYWxvZ3VlUHJvZmlsZUNoYW5nZVBpY3R1cmVTZWxlY3RvciA9ICcuZGlhbG9ndWVfdHlwZV9wcm9maWxlLWNoYW5nZS1waWN0dXJlJztcbmV4cG9ydCBjb25zdCBkaWFsb2d1ZVByb2ZpbGVFZGl0U2VsZWN0b3IgPSAnLmRpYWxvZ3VlX3R5cGVfcHJvZmlsZS1lZGl0JztcblxuZXhwb3J0IGNvbnN0IHVzZXJJbmZvQWJvdXRTZWxlY3RvciA9ICcucHJvZmlsZV9fc3VidGl0bGUnO1xuZXhwb3J0IGNvbnN0IHVzZXJJbmZvQXZhdGFyU2VsZWN0b3IgPSAnLnByb2ZpbGVfX2F2YXRhci1pbWFnZSc7XG5leHBvcnQgY29uc3QgdXNlckluZm9OYW1lU2VsZWN0b3IgPSAnLnByb2ZpbGVfX3RpdGxlLXRleHQnO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICAgIGZvcm1TZWxlY3RvcjogJy5kaWFsb2d1ZV9fZm9ybScsXG4gICAgaW5wdXRTZWxlY3RvcjogJy5kaWFsb2d1ZV9fZm9ybS1maWVsZCcsXG4gICAgaW5wdXRFcnJvclNlbGVjdG9yOiAnLiVmb3JtSWQtJWlucHV0TmFtZS1lcnJvcicsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZGlhbG9ndWVfX3N1Ym1pdC1idXR0b24nLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdkaWFsb2d1ZV9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZCcsXG4gICAgaW5wdXRFcnJvckNsYXNzOiAnZGlhbG9ndWVfX2Zvcm0tZmllbGRfaGFzLWVycm9yJyxcbiAgICBlcnJvclZpc2libGVDbGFzczogJ2RpYWxvZ3VlX19mb3JtLWVycm9yX3Zpc2libGUnXG59O1xuIiwiaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaSc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQnO1xuaW1wb3J0IERpYWxvZ3VlV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL0RpYWxvZ3VlV2l0aENvbmZpcm1hdGlvbic7XG5pbXBvcnQgRGlhbG9ndWVXaXRoRXJyb3IgZnJvbSAnLi4vY29tcG9uZW50cy9EaWFsb2d1ZVdpdGhFcnJvcic7XG5pbXBvcnQgRGlhbG9ndWVXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL0RpYWxvZ3VlV2l0aEZvcm0nO1xuaW1wb3J0IERpYWxvZ3VlV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoSW1hZ2UnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbic7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mbyc7XG5pbXBvcnQge1xuICAgIGFwaUF1dGhLZXksXG4gICAgYXBpQmFzZVVybCxcbiAgICBidXR0b25DYXJkQWRkU2VsZWN0b3IsXG4gICAgYnV0dG9uUHJvZmlsZUNoYW5nZVBpY3R1cmVTZWxlY3RvcixcbiAgICBidXR0b25Qcm9maWxlRWRpdFNlbGVjdG9yLFxuICAgIGNhcmRzQ29udGFpbmVyU2VsZWN0b3IsXG4gICAgY2FyZFRlbXBsYXRlU2VsZWN0b3IsXG4gICAgZGlhbG9ndWVDYXJkQWRkU2VsZWN0b3IsXG4gICAgZGlhbG9ndWVDYXJkUmVtb3ZlU2VsZWN0b3IsXG4gICAgZGlhbG9ndWVDYXJkVmlld1NlbGVjdG9yLFxuICAgIGRpYWxvZ3VlRXJyb3JTZWxlY3RvcixcbiAgICBkaWFsb2d1ZVByb2ZpbGVDaGFuZ2VQaWN0dXJlU2VsZWN0b3IsXG4gICAgZGlhbG9ndWVQcm9maWxlRWRpdFNlbGVjdG9yLFxuICAgIHVzZXJJbmZvQWJvdXRTZWxlY3RvcixcbiAgICB1c2VySW5mb0F2YXRhclNlbGVjdG9yLFxuICAgIHVzZXJJbmZvTmFtZVNlbGVjdG9yLFxuICAgIHZhbGlkYXRpb25TZXR0aW5nc1xufSBmcm9tICcuLi91dGlsaXRpZXMvY29uc3RhbnRzJztcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuXG4vKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBJTlNUQU5DRVNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEFwaS5cbiAqXG4gKiBAdHlwZSB7QXBpfVxuICovXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaUJhc2VVcmwsIGFwaUF1dGhLZXkpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBTZWN0aW9uIGZvciB0aGUgY2FyZHMgY29udGFpbmVyLlxuICpcbiAqIEB0eXBlIHtTZWN0aW9ufVxuICovXG5jb25zdCBjYXJkc0NvbnRhaW5lciA9IG5ldyBTZWN0aW9uKFxuICAgIGNhcmRzQ29udGFpbmVyU2VsZWN0b3IsXG4gICAgY2FyZERhdGEgPT4gY2FyZHNDb250YWluZXIuYWRkRWxlbWVudExhc3QoXG4gICAgICAgIGNyZWF0ZUNhcmQoY2FyZERhdGEpXG4gICAgKVxuKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgRGlhbG9ndWVXaXRoRm9ybSBmb3IgdGhlIGNhcmQtYWRkIGRpYWxvZ3VlLlxuICpcbiAqIEB0eXBlIHtEaWFsb2d1ZVdpdGhGb3JtfVxuICovXG5jb25zdCBkaWFsb2d1ZUNhcmRBZGQgPSBuZXcgRGlhbG9ndWVXaXRoRm9ybShkaWFsb2d1ZUNhcmRBZGRTZWxlY3RvciwgaW5wdXRzTGlzdCA9PiB7XG4gICAgZGlhbG9ndWVDYXJkQWRkLnNldExvYWRpbmdTdGF0ZSh0cnVlKTtcblxuICAgIGFwaS5hZGRDYXJkKGlucHV0c0xpc3QpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIGNhcmRzQ29udGFpbmVyLmFkZEVsZW1lbnRGaXJzdChjcmVhdGVDYXJkKHJlc3BvbnNlKSk7XG4gICAgICAgICAgICBkaWFsb2d1ZUNhcmRBZGQuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IGRpYWxvZ3VlRXJyb3Iub3BlbihlcnJvcikpXG4gICAgICAgIC5maW5hbGx5KCgpID0+IGRpYWxvZ3VlQ2FyZEFkZC5zZXRMb2FkaW5nU3RhdGUoZmFsc2UpKTtcbn0pO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBEaWFsb2d1ZVdpdGhDb25maXJtYXRpb24gZm9yIHRoZSBjYXJkLXJlbW92ZSBkaWFsb2d1ZS5cbiAqXG4gKiBAdHlwZSB7RGlhbG9ndWVXaXRoQ29uZmlybWF0aW9ufVxuICovXG5jb25zdCBkaWFsb2d1ZUNhcmRSZW1vdmUgPSBuZXcgRGlhbG9ndWVXaXRoQ29uZmlybWF0aW9uKGRpYWxvZ3VlQ2FyZFJlbW92ZVNlbGVjdG9yKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgRGlhbG9ndWVXaXRoSW1hZ2UgZm9yIHRoZSBjYXJkLXZpZXcgZGlhbG9ndWUuXG4gKlxuICogQHR5cGUge0RpYWxvZ3VlV2l0aEltYWdlfVxuICovXG5jb25zdCBkaWFsb2d1ZUNhcmRWaWV3ID0gbmV3IERpYWxvZ3VlV2l0aEltYWdlKGRpYWxvZ3VlQ2FyZFZpZXdTZWxlY3Rvcik7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIERpYWxvZ3VlV2l0aEVycm9yIGZvciB0aGUgZXJyb3IgZGlhbG9ndWUuXG4gKlxuICogQHR5cGUge0RpYWxvZ3VlV2l0aEVycm9yfVxuICovXG5jb25zdCBkaWFsb2d1ZUVycm9yID0gbmV3IERpYWxvZ3VlV2l0aEVycm9yKGRpYWxvZ3VlRXJyb3JTZWxlY3Rvcik7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIERpYWxvZ3VlV2l0aEZvcm0gZm9yIHRoZSBwcm9maWxlLWNoYW5nZS1waWN0dXJlIGRpYWxvZ3VlLlxuICpcbiAqIEB0eXBlIHtEaWFsb2d1ZVdpdGhGb3JtfVxuICovXG5jb25zdCBkaWFsb2d1ZVByb2ZpbGVDaGFuZ2VQaWN0dXJlID0gbmV3IERpYWxvZ3VlV2l0aEZvcm0oZGlhbG9ndWVQcm9maWxlQ2hhbmdlUGljdHVyZVNlbGVjdG9yLCBpbnB1dHNMaXN0ID0+IHtcbiAgICBkaWFsb2d1ZVByb2ZpbGVDaGFuZ2VQaWN0dXJlLnNldExvYWRpbmdTdGF0ZSh0cnVlKTtcblxuICAgIGFwaS51cGRhdGVVc2VyQXZhdGFyKGlucHV0c0xpc3QpXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGRpYWxvZ3VlUHJvZmlsZUNoYW5nZVBpY3R1cmUuY2xvc2UoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IGRpYWxvZ3VlRXJyb3Iub3BlbihlcnJvcikpXG4gICAgICAgIC5maW5hbGx5KCgpID0+IGRpYWxvZ3VlUHJvZmlsZUNoYW5nZVBpY3R1cmUuc2V0TG9hZGluZ1N0YXRlKGZhbHNlKSk7XG59KTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgRGlhbG9ndWVXaXRoRm9ybSBmb3IgdGhlIHByb2ZpbGUtZWRpdCBkaWFsb2d1ZS5cbiAqXG4gKiBAdHlwZSB7RGlhbG9ndWVXaXRoRm9ybX1cbiAqL1xuY29uc3QgZGlhbG9ndWVQcm9maWxlRWRpdCA9IG5ldyBEaWFsb2d1ZVdpdGhGb3JtKGRpYWxvZ3VlUHJvZmlsZUVkaXRTZWxlY3RvciwgaW5wdXRzTGlzdCA9PiB7XG4gICAgZGlhbG9ndWVQcm9maWxlRWRpdC5zZXRMb2FkaW5nU3RhdGUodHJ1ZSk7XG5cbiAgICBhcGkudXBkYXRlVXNlckluZm8oaW5wdXRzTGlzdClcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzcG9uc2UpO1xuICAgICAgICAgICAgZGlhbG9ndWVQcm9maWxlRWRpdC5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4gZGlhbG9ndWVFcnJvci5vcGVuKGVycm9yKSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4gZGlhbG9ndWVQcm9maWxlRWRpdC5zZXRMb2FkaW5nU3RhdGUoZmFsc2UpKTtcbn0pO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBVc2VySW5mbyBmb3IgdGhlIHVzZXIgcHJvZmlsZS5cbiAqXG4gKiBAdHlwZSB7VXNlckluZm99XG4gKi9cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgICBuYW1lU2VsZWN0b3I6IHVzZXJJbmZvTmFtZVNlbGVjdG9yLFxuICAgIGFib3V0U2VsZWN0b3I6IHVzZXJJbmZvQWJvdXRTZWxlY3RvcixcbiAgICBhdmF0YXJTZWxlY3RvcjogdXNlckluZm9BdmF0YXJTZWxlY3RvclxufSk7XG5cbi8qXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEZVTkNUSU9OU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuLyoqXG4gKiBHZXQgdGhlIGluaXRpYWwgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGFuZCB1cGRhdGUgdGhlIHBhZ2UgYWNjb3JkaW5nbHkuXG4gKlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmNvbnN0IGxvYWRJbml0aWFsRGF0YSA9ICgpID0+IHtcbiAgICAvLyBEaXNwbGF5IGEgbG9hZGluZyBtZXNzYWdlIHdoaWxlIHdhaXRpbmcgZm9yIHJlc3BvbnNlXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xuICAgICAgICAuLi51c2VySW5mby5nZXRVc2VySW5mbygpLFxuICAgICAgICBuYW1lOiAnTG9hZGluZy4uLidcbiAgICB9KTtcblxuICAgIC8vIE9yZGVyIG9mIGV4ZWN1dGlvbiBpcyBpbXBvcnRhbnQgaGVyZVxuICAgIFByb21pc2VcbiAgICAgICAgLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRBbGxDYXJkcygpXSlcbiAgICAgICAgLnRoZW4oKFt1c2VyUmVzcG9uc2UsIGNhcmRzUmVzcG9uc2VdKSA9PiB7XG4gICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyUmVzcG9uc2UpO1xuICAgICAgICAgICAgY2FyZHNDb250YWluZXIucmVuZGVySXRlbXMoY2FyZHNSZXNwb25zZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiBkaWFsb2d1ZUVycm9yLm9wZW4oZXJyb3IpKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEZvcm1WYWxpZGF0b3IgZm9yIGVhY2ggZm9ybSBvbiB0aGUgcGFnZS5cbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuY29uc3QgYWRkVmFsaWRhdGlvblRvRm9ybXMgPSAoKSA9PiB7XG4gICAgY29uc3QgZm9ybXNMaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtU2VsZWN0b3IpKTtcblxuICAgIGZvcm1zTGlzdC5mb3JFYWNoKGZvcm1FbGVtZW50ID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRhdG9yT2JqID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVsZW1lbnQsIHZhbGlkYXRpb25TZXR0aW5ncyk7XG4gICAgICAgIHZhbGlkYXRvck9iai5lbmFibGVWYWxpZGF0aW9uKCk7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIGNhcmQgd2hpY2ggb3BlbnMgYSBkaWFsb2d1ZSB3aGVuIGNsaWNrZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNhcmREYXRhXG4gKiBAcmV0dXJucyB7RWxlbWVudH1cbiAqL1xuY29uc3QgY3JlYXRlQ2FyZCA9IGNhcmREYXRhID0+IHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgICAgIGNhcmREYXRhLFxuICAgICAgICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgICAgICAge1xuICAgICAgICAgICAgaGFuZGxlSW1hZ2VDbGljazogKCkgPT4gZGlhbG9ndWVDYXJkVmlldy5vcGVuKGNhcmREYXRhKSxcbiAgICAgICAgICAgIGhhbmRsZUxpa2VDbGljazogKGNhcmRJZCwgaXNMaWtlZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc0xpa2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGFwaS5kaXNsaWtlQ2FyZChjYXJkSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiBjYXJkLnVwZGF0ZUxpa2VzKHJlc3BvbnNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiBkaWFsb2d1ZUVycm9yLm9wZW4oZXJyb3IpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhcGkubGlrZUNhcmQoY2FyZElkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gY2FyZC51cGRhdGVMaWtlcyhyZXNwb25zZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gZGlhbG9ndWVFcnJvci5vcGVuKGVycm9yKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhhbmRsZVJlbW92ZUNsaWNrOiBjYXJkSWQgPT4ge1xuICAgICAgICAgICAgICAgIGRpYWxvZ3VlQ2FyZFJlbW92ZS5vcGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQucmVtb3ZlRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpYWxvZ3VlQ2FyZFJlbW92ZS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiBkaWFsb2d1ZUVycm9yLm9wZW4oZXJyb3IpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdXNlckluZm8uZ2V0VXNlckluZm8oKS5pZFxuICAgICk7XG5cbiAgICByZXR1cm4gY2FyZC5nZW5lcmF0ZUVsZW1lbnQoKTtcbn1cblxuLypcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRVhFQ1VUSU9OU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuLy8gQ29ubmVjdCB0aGUgY2FyZC1hZGQgYnV0dG9uIHRvIHRoZSByZWxhdGVkIGRpYWxvZ3VlXG5jb25zdCBidXR0b25DYXJkQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25DYXJkQWRkU2VsZWN0b3IpO1xuYnV0dG9uQ2FyZEFkZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGRpYWxvZ3VlQ2FyZEFkZC5vcGVuKCkpO1xuXG4vLyBDb25uZWN0IHRoZSBwcm9maWxlLWNoYW5nZS1waWN0dXJlIGJ1dHRvbiB0byB0aGUgcmVsYXRlZCBkaWFsb2d1ZVxuY29uc3QgYnV0dG9uUHJvZmlsZUNoYW5nZVBpY3R1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJ1dHRvblByb2ZpbGVDaGFuZ2VQaWN0dXJlU2VsZWN0b3IpO1xuYnV0dG9uUHJvZmlsZUNoYW5nZVBpY3R1cmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBkaWFsb2d1ZVByb2ZpbGVDaGFuZ2VQaWN0dXJlLm9wZW4oKSk7XG5cbi8vIENvbm5lY3QgdGhlIHByb2ZpbGUtZWRpdCBidXR0b24gdG8gdGhlIHJlbGF0ZWQgZGlhbG9ndWVcbmNvbnN0IGJ1dHRvblByb2ZpbGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidXR0b25Qcm9maWxlRWRpdFNlbGVjdG9yKTtcbmJ1dHRvblByb2ZpbGVFZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGRpYWxvZ3VlUHJvZmlsZUVkaXQuc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG4gICAgZGlhbG9ndWVQcm9maWxlRWRpdC5vcGVuKCk7XG59KTtcblxubG9hZEluaXRpYWxEYXRhKCk7XG5hZGRWYWxpZGF0aW9uVG9Gb3JtcygpO1xuIl0sIm5hbWVzIjpbIkFwaSIsImJhc2VVcmwiLCJhdXRoS2V5IiwidGhpcyIsIl9iYXNlVXJsIiwiX2F1dGhLZXkiLCJfc2VuZFJlcXVlc3QiLCJuYW1lIiwibGluayIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiaWQiLCJhYm91dCIsImF2YXRhciIsIm1ldGhvZCIsInRhcmdldFVybCIsIm9wdGlvbnMiLCJmZXRjaCIsImhlYWRlcnMiLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXNwb25zZSIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiQ2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJ1c2VySWQiLCJfaWQiLCJsaWtlcyIsIm93bmVyIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZVJlbW92ZUNsaWNrIiwiX25hbWUiLCJfbGluayIsIl9saWtlcyIsIl9vd25lciIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZVJlbW92ZUNsaWNrIiwiX3VzZXJJZCIsIl9jcmVhdGVGcm9tVGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2hlY2tQZXJtaXNzaW9ucyIsInVwZGF0ZUxpa2VzIiwiX3RpdGxlRWxlbWVudCIsInRleHRDb250ZW50IiwiX2ltYWdlRWxlbWVudCIsImFsdCIsInNyYyIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsIl9pc0xpa2VkIiwiX21hcmtMaWtlZCIsIl9tYXJrRGlzbGlrZWQiLCJfbGlrZUNvdW50ZXJFbGVtZW50IiwibGVuZ3RoIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsIl9jYXJkU2VsZWN0b3IiLCJjbG9uZU5vZGUiLCJfdGl0bGVTZWxlY3RvciIsIl9pbWFnZVNlbGVjdG9yIiwiX2xpa2VCdXR0b25FbGVtZW50IiwiX2xpa2VCdXR0b25TZWxlY3RvciIsIl9saWtlQ291bnRlclNlbGVjdG9yIiwiX3JlbW92ZUJ1dHRvbkVsZW1lbnQiLCJfcmVtb3ZlQnV0dG9uU2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwic29tZSIsInVzZXJEYXRhIiwiY2xhc3NMaXN0IiwiYWRkIiwiX2xpa2VCdXR0b25BY3RpdmVDbGFzcyIsIkRpYWxvZ3VlIiwiZGlhbG9ndWVTZWxlY3RvciIsIl9kaWFsb2d1ZUVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZUNsaWNrQ2xvc2UiLCJfb3BlbmVkQ2xhc3MiLCJzZXRFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9iYWNrZ3JvdW5kQ2xhc3MiLCJfY2xvc2VCdXR0b25DbGFzcyIsIkRpYWxvZ3VlV2l0aENvbmZpcm1hdGlvbiIsIl9idXR0b25FbGVtZW50IiwiX2J1dHRvblNlbGVjdG9yIiwiY29uZmlybWF0aW9uQ2FsbGJhY2siLCJfY29uZmlybWF0aW9uQ2FsbGJhY2siLCJEaWFsb2d1ZVdpdGhFcnJvciIsIl9wYXJhZ3JhcGhFbGVtZW50IiwiX3BhcmFncmFwaFNlbGVjdG9yIiwiX2NvdW50ZXJFbGVtZW50IiwiX2NvdW50ZXJTZWxlY3RvciIsImVycm9yTWVzc2FnZSIsIl9oaWRlQWZ0ZXJTZWNvbmRzIiwiX2ludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsIl90aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwiY29uc29sZSIsImVycm9yIiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyVGltZW91dCIsIkRpYWxvZ3VlV2l0aEZvcm0iLCJzdWJtaXNzaW9uQ2FsbGJhY2siLCJfZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiX3N1Ym1pc3Npb25DYWxsYmFjayIsIl9oYW5kbGVGb3JtU3VibWlzc2lvbiIsInJlc2V0IiwiaW5wdXRzTGlzdCIsImlucHV0TmFtZSIsImVsZW1lbnRzIiwidmFsdWUiLCJpc0xvYWRpbmciLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIkFycmF5IiwiZnJvbSIsImlucHV0VmFsdWVzIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIkRpYWxvZ3VlV2l0aEltYWdlIiwiX2NhcHRpb25FbGVtZW50IiwiX2NhcHRpb25TZWxlY3RvciIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsInZhbGlkYXRpb25TZXR0aW5ncyIsIl92YWxpZGF0aW9uU2V0dGluZ3MiLCJfYW5hbHl6ZUZvcm0iLCJfdG9nZ2xlU3VibWl0QnV0dG9uU3RhdGUiLCJfaW5wdXRzTGlzdCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfbWFrZVN1Ym1pdEJ1dHRvbkRpc2FibGVkIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2dldElucHV0RXJyb3JFbGVtZW50IiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JWaXNpYmxlQ2xhc3MiLCJlcnJvclNlbGVjdG9yIiwiaW5wdXRFcnJvclNlbGVjdG9yIiwicmVwbGFjZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfbWFrZVN1Ym1pdEJ1dHRvbkFjdGl2ZSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyQ2FsbGJhY2siLCJfY29udGFpbmVyRWxlbWVudCIsIl9yZW5kZXJlckNhbGxiYWNrIiwiaXRlbXNMaXN0IiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiYXBwZW5kIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJ1bmRlZmluZWQiLCJfbmFtZUVsZW1lbnQiLCJfYWJvdXRFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJmb3JtU2VsZWN0b3IiLCJhcGkiLCJjYXJkc0NvbnRhaW5lciIsImNhcmREYXRhIiwiYWRkRWxlbWVudExhc3QiLCJjcmVhdGVDYXJkIiwiZGlhbG9ndWVDYXJkQWRkIiwic2V0TG9hZGluZ1N0YXRlIiwiYWRkQ2FyZCIsImFkZEVsZW1lbnRGaXJzdCIsImNhdGNoIiwiZGlhbG9ndWVFcnJvciIsIm9wZW4iLCJmaW5hbGx5IiwiZGlhbG9ndWVDYXJkUmVtb3ZlIiwiZGlhbG9ndWVDYXJkVmlldyIsImRpYWxvZ3VlUHJvZmlsZUNoYW5nZVBpY3R1cmUiLCJ1cGRhdGVVc2VyQXZhdGFyIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImRpYWxvZ3VlUHJvZmlsZUVkaXQiLCJ1cGRhdGVVc2VySW5mbyIsImNhcmQiLCJjYXJkSWQiLCJpc0xpa2VkIiwiZGlzbGlrZUNhcmQiLCJsaWtlQ2FyZCIsImRlbGV0ZUNhcmQiLCJyZW1vdmVFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJnZW5lcmF0ZUVsZW1lbnQiLCJzZXRJbnB1dFZhbHVlcyIsImFsbCIsImdldEFsbENhcmRzIiwidXNlclJlc3BvbnNlIiwiY2FyZHNSZXNwb25zZSIsInJlbmRlckl0ZW1zIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=