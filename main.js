!function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t,this._authKey=n}var n,o;return n=e,o=[{key:"getAllCards",value:function(){return this._sendRequest("GET","/cards")}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return this._sendRequest("POST","/cards",{body:JSON.stringify({name:t,link:n})})}},{key:"deleteCard",value:function(e){return this._sendRequest("DELETE","/cards/"+e)}},{key:"likeCard",value:function(e){return this._sendRequest("PUT","/cards/likes/"+e)}},{key:"dislikeCard",value:function(e){return this._sendRequest("DELETE","/cards/likes/"+e)}},{key:"getUserInfo",value:function(){return this._sendRequest("GET","/users/me")}},{key:"updateUserInfo",value:function(e){var t=e.name,n=e.about;return this._sendRequest("PATCH","/users/me",{body:JSON.stringify({name:t,about:n})})}},{key:"updateUserAvatar",value:function(e){var t=e.avatar;return this._sendRequest("PATCH","/users/me/avatar",{body:JSON.stringify({avatar:t})})}},{key:"_sendRequest",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return fetch(this._baseUrl+n,t({method:e,headers:{Authorization:this._authKey,"Content-Type":"application/json"}},r)).then(this._checkResponse)}},{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("An error occurred: ".concat(e.status," ").concat(e.statusText))}}],o&&r(n.prototype,o),e}(),i=o;function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n,r,o){var i=t._id,a=t.name,u=t.link,c=t.likes,s=t.owner,f=r.handleImageClick,h=r.handleLikeClick,p=r.handleRemoveClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_cardSelector",".card"),l(this,"_titleSelector",".card__title"),l(this,"_imageSelector",".card__image"),l(this,"_likeButtonSelector",".card__like-button"),l(this,"_likeCounterSelector",".card__like-counter"),l(this,"_removeButtonSelector",".card__remove-button"),l(this,"_likeButtonActiveClass","card__like-button_active"),this._id=i,this._name=a,this._link=u,this._likes=c,this._owner=s,this._templateSelector=n,this._handleImageClick=f,this._handleLikeClick=h,this._handleRemoveClick=p,this._userId=o}var t,n;return t=e,n=[{key:"generateElement",value:function(){return this._createFromTemplate(),this._setEventListeners(),this._checkPermissions(),this.updateLikes(),this._titleElement.textContent=this._name,this._imageElement.alt=this._name,this._imageElement.src=this._link,this._cardElement}},{key:"removeElement",value:function(){this._cardElement.remove()}},{key:"updateLikes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.likes;this._likes=t||this._likes,this._isLiked()?this._markLiked():this._markDisliked(),this._likeCounterElement.textContent=this._likes.length}},{key:"_createFromTemplate",value:function(){this._cardElement=document.querySelector(this._templateSelector).content.querySelector(this._cardSelector).cloneNode(!0),this._titleElement=this._cardElement.querySelector(this._titleSelector),this._imageElement=this._cardElement.querySelector(this._imageSelector),this._likeButtonElement=this._cardElement.querySelector(this._likeButtonSelector),this._likeCounterElement=this._cardElement.querySelector(this._likeCounterSelector),this._removeButtonElement=this._cardElement.querySelector(this._removeButtonSelector)}},{key:"_setEventListeners",value:function(){var e=this;this._imageElement.addEventListener("click",this._handleImageClick),this._likeButtonElement.addEventListener("click",(function(){return e._handleLikeClick(e._id,e._isLiked())})),this._removeButtonElement.addEventListener("click",(function(){return e._handleRemoveClick(e._id)}))}},{key:"_checkPermissions",value:function(){this._owner._id!==this._userId&&this._removeButtonElement.remove()}},{key:"_isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._userId}))}},{key:"_markLiked",value:function(){this._likeButtonElement.classList.add(this._likeButtonActiveClass)}},{key:"_markDisliked",value:function(){this._likeButtonElement.classList.remove(this._likeButtonActiveClass)}}],n&&a(t.prototype,n),e}(),c=u;function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_backgroundClass","dialogue"),f(this,"_closeButtonClass","dialogue__close-button"),f(this,"_openedClass","dialogue_opened"),this._dialogueElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._handleClickClose=this._handleClickClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._dialogueElement.classList.add(this._openedClass),this.setEventListeners()}},{key:"close",value:function(){this._dialogueElement.classList.remove(this._openedClass),this.removeEventListeners()}},{key:"setEventListeners",value:function(){document.addEventListener("keydown",this._handleEscClose),this._dialogueElement.addEventListener("click",this._handleClickClose)}},{key:"removeEventListeners",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._dialogueElement.removeEventListener("click",this._handleClickClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleClickClose",value:function(e){(e.target.classList.contains(this._backgroundClass)||e.target.classList.contains(this._closeButtonClass))&&this.close()}}])&&s(t.prototype,n),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=y(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},m.apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function a(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o=".dialogue__submit-button",(r="_buttonSelector")in(n=b(t=i.call(this,e)))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t._buttonElement=t._dialogueElement.querySelector(t._buttonSelector),t}return t=a,(n=[{key:"open",value:function(e){this._confirmationCallback=e,m(g(a.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){m(g(a.prototype),"setEventListeners",this).call(this),this._buttonElement.addEventListener("click",this._confirmationCallback)}},{key:"removeEventListeners",value:function(){m(g(a.prototype),"removeEventListeners",this).call(this),this._buttonElement.removeEventListener("click",this._confirmationCallback)}}])&&d(t.prototype,n),a}(h);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},O.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function j(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),R(P(t=i.call(this,e)),"_hideAfterSeconds",5),R(P(t),"_paragraphSelector",".dialogue__paragraph_primary"),R(P(t),"_counterSelector",".dialogue__counter"),t._paragraphElement=t._dialogueElement.querySelector(t._paragraphSelector),t._counterElement=t._dialogueElement.querySelector(t._counterSelector),t}return t=a,(n=[{key:"open",value:function(e){var t=this;O(L(a.prototype),"open",this).call(this),this._paragraphElement.textContent=e,this._counterElement.textContent=this._hideAfterSeconds,this._intervalId=setInterval((function(){t._counterElement.textContent-=1}),1e3),this._timeoutId=setTimeout((function(){return t.close()}),1e3*this._hideAfterSeconds),console.error(e)}},{key:"close",value:function(){O(L(a.prototype),"close",this).call(this),clearInterval(this._intervalId),clearTimeout(this._timeoutId)}}])&&S(t.prototype,n),a}(h);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=A(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(this,arguments)}function A(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function D(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(r);if(o){var n=F(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),V(U(n=i.call(this,e)),"_formSelector",".dialogue__form"),V(U(n),"_buttonSelector",".dialogue__submit-button"),n._formElement=n._dialogueElement.querySelector(n._formSelector),n._buttonElement=n._dialogueElement.querySelector(n._buttonSelector),n._submissionCallback=t,n._handleFormSubmission=n._handleFormSubmission.bind(U(n)),n}return t=a,(n=[{key:"close",value:function(){T(F(a.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setInputValues",value:function(e){for(var t in e)this._formElement.elements[t]&&(this._formElement.elements[t].value=e[t])}},{key:"setLoadingState",value:function(e){this._buttonElement.textContent=e?"Saving...":"Save"}},{key:"setEventListeners",value:function(){T(F(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",this._handleFormSubmission)}},{key:"removeEventListeners",value:function(){T(F(a.prototype),"removeEventListeners",this).call(this),this._formElement.removeEventListener("submit",this._handleFormSubmission)}},{key:"_handleFormSubmission",value:function(e){e.preventDefault(),this._submissionCallback(this._getInputValues())}},{key:"_getInputValues",value:function(){var e=Array.from(this._formElement.elements),t={};return e.forEach((function(e){t[e.name]=e.value})),t}}])&&q(t.prototype,n),a}(h);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=H(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},G.apply(this,arguments)}function H(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function M(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Q(r);if(o){var n=Q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return M(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),W($(t=i.call(this,e)),"_imageSelector",".dialogue__image"),W($(t),"_captionSelector",".dialogue__caption"),t._imageElement=t._dialogueElement.querySelector(t._imageSelector),t._captionElement=t._dialogueElement.querySelector(t._captionSelector),t}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;G(Q(a.prototype),"open",this).call(this),this._imageElement.alt=t,this._imageElement.src=n,this._captionElement.textContent=t}}])&&J(t.prototype,n),a}(h);function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Z=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=t,this._validationSettings=n}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){var e=this;this._analyzeForm(),this._toggleSubmitButtonState(),this._inputsList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleSubmitButtonState()}))})),this._formElement.addEventListener("reset",(function(){return e._makeSubmitButtonDisabled()}))}},{key:"_analyzeForm",value:function(){this._inputsList=Array.from(this._formElement.querySelectorAll(this._validationSettings.inputSelector)),this._submitButtonElement=this._formElement.querySelector(this._validationSettings.submitButtonSelector)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._getInputErrorElement(e);e.classList.add(this._validationSettings.inputErrorClass),n.classList.add(this._validationSettings.errorVisibleClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._getInputErrorElement(e);e.classList.remove(this._validationSettings.inputErrorClass),t.classList.remove(this._validationSettings.errorVisibleClass),t.textContent=null}},{key:"_getInputErrorElement",value:function(e){var t=this._validationSettings.inputErrorSelector.replace("%formId",this._formElement.id).replace("%inputName",e.name);return this._formElement.querySelector(t)}},{key:"_toggleSubmitButtonState",value:function(){this._hasInvalidInput()?this._makeSubmitButtonDisabled():this._makeSubmitButtonActive()}},{key:"_hasInvalidInput",value:function(){return this._inputsList.some((function(e){return!e.validity.valid}))}},{key:"_makeSubmitButtonActive",value:function(){this._submitButtonElement.classList.remove(this._validationSettings.inactiveButtonClass),this._submitButtonElement.disabled=!1}},{key:"_makeSubmitButtonDisabled",value:function(){this._submitButtonElement.classList.add(this._validationSettings.inactiveButtonClass),this._submitButtonElement.disabled=!0}}])&&Y(t.prototype,n),e}(),ee=Z;function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._containerElement=document.querySelector(t),this._rendererCallback=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._rendererCallback(e)}))}},{key:"addElementFirst",value:function(e){this._containerElement.prepend(e)}},{key:"addElementLast",value:function(e){this._containerElement.append(e)}}])&&te(t.prototype,n),e}();function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var oe=function(){function e(t){var n,r=t.nameSelector,o=t.aboutSelector,i=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=void 0,"_id"in this?Object.defineProperty(this,"_id",{value:n,enumerable:!0,configurable:!0,writable:!0}):this._id=n,this._nameElement=document.querySelector(r),this._aboutElement=document.querySelector(o),this._avatarElement=document.querySelector(i)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{id:this._id,name:this._nameElement.textContent,about:this._aboutElement.textContent,avatar:this._avatarElement.src}}},{key:"setUserInfo",value:function(e){var t=e._id,n=e.name,r=e.about,o=e.avatar;this._id=t||this._id,this._nameElement.textContent=n,this._aboutElement.textContent=r,this._avatarElement.src=o}}])&&re(t.prototype,n),e}(),ie={formSelector:".dialogue__form",inputSelector:".dialogue__form-field",inputErrorSelector:".%formId-%inputName-error",submitButtonSelector:".dialogue__submit-button",inactiveButtonClass:"dialogue__submit-button_disabled",inputErrorClass:"dialogue__form-field_has-error",errorVisibleClass:"dialogue__form-error_visible"};function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=new i("https://around.nomoreparties.co/v1/group-12","190e9486-cf84-4370-aa42-80831152ad82"),fe=new ne(".cards__list",(function(e){return fe.addElementLast(be(e))})),he=new N(".dialogue_type_card-add",(function(e){he.setLoadingState(!0),se.addCard(e).then((function(e){fe.addElementFirst(be(e)),he.close()})).catch((function(e){return me.open(e)})).finally((function(){return he.setLoadingState(!1)}))})),pe=new E(".dialogue_type_card-remove"),de=new X(".dialogue_type_card-view"),me=new I(".dialogue_type_error"),ye=new N(".dialogue_type_profile-change-picture",(function(e){ye.setLoadingState(!0),se.updateUserAvatar(e).then((function(e){ve.setUserInfo(e),ye.close()})).catch((function(e){return me.open(e)})).finally((function(){return ye.setLoadingState(!1)}))})),_e=new N(".dialogue_type_profile-edit",(function(e){_e.setLoadingState(!0),se.updateUserInfo(e).then((function(e){ve.setUserInfo(e),_e.close()})).catch((function(e){return me.open(e)})).finally((function(){return _e.setLoadingState(!1)}))})),ve=new oe({nameSelector:".profile__title-text",aboutSelector:".profile__subtitle",avatarSelector:".profile__avatar-image"}),be=function(e){var t=new c(e,"#card-template",{handleImageClick:function(){return de.open(e)},handleLikeClick:function(e,n){n?se.dislikeCard(e).then((function(e){return t.updateLikes(e)})).catch((function(e){return me.open(e)})):se.likeCard(e).then((function(e){return t.updateLikes(e)})).catch((function(e){return me.open(e)}))},handleRemoveClick:function(e){pe.open((function(){se.deleteCard(e).then((function(){t.removeElement(),pe.close()})).catch((function(e){return me.open(e)}))}))}},ve.getUserInfo().id);return t.generateElement()};document.querySelector(".profile__add-button").addEventListener("click",(function(){return he.open()})),document.querySelector(".profile__avatar-overlay").addEventListener("click",(function(){return ye.open()})),document.querySelector(".profile__edit-button").addEventListener("click",(function(){_e.setInputValues(ve.getUserInfo()),_e.open()})),ve.setUserInfo(ue(ue({},ve.getUserInfo()),{},{name:"Loading..."})),Promise.all([se.getUserInfo(),se.getAllCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ve.setUserInfo(o),fe.renderItems(i)})).catch((function(e){return me.open(e)})),Array.from(document.querySelectorAll(ie.formSelector)).forEach((function(e){new ee(e,ie).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUtNLGdCQUNMZCxHQUFtQjVHLFdBRXRCd0csT0FBTSxTQUFBbEYsR0FBSyxPQUFJbUYsR0FBY0MsS0FBS3BGLFdBSW5EMEYsR0FBU1csY0FBYzVNLElBRzNCLE9BQU9xTSxFQUFLUSxtQkFVTTFKLFNBQVNDLGNEaE9NLHdCQ2lPdkJXLGlCQUFpQixTQUFTLGtCQUFNc0gsR0FBZ0JNLFVBRzNCeEksU0FBU0MsY0RuT00sNEJDb092QlcsaUJBQWlCLFNBQVMsa0JBQU1nSSxHQUE2QkosVUFHOUR4SSxTQUFTQyxjRHRPTSx5QkN1T3ZCVyxpQkFBaUIsU0FBUyxXQUN4Q29JLEdBQW9CVyxlQUFlYixHQUFTVyxlQUM1Q1QsR0FBb0JSLFVBdkZwQk0sR0FBU0MsWUFBVCxTQUNPRCxHQUFTVyxlQURoQixJQUVJak4sS0FBTSxnQkFJVmtCLFFBQ0trTSxJQUFJLENBQUMvQixHQUFJNEIsY0FBZTVCLEdBQUlnQyxnQkFDNUJ4TSxNQUFLLFlBQW1DLEksSUFBQSxHLEVBQUEsRSw0Q0FBQSxJLGt4QkFBakN5TSxFQUFpQyxLQUFuQkMsRUFBbUIsS0FDckNqQixHQUFTQyxZQUFZZSxHQUNyQmhDLEdBQWVrQyxZQUFZRCxNQUU5QnpCLE9BQU0sU0FBQWxGLEdBQUssT0FBSW1GLEdBQWNDLEtBQUtwRixNQVNyQmlCLE1BQU1DLEtBQUt0RSxTQUFTc0YsaUJBQWlCUCxHQUFtQjZDLGVBRWhFcEQsU0FBUSxTQUFBTSxHQUNPLElBQUlELEdBQWNDLEVBQWFDLElBQ3ZDa0Ysc0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9EaWFsb2d1ZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9EaWFsb2d1ZVdpdGhFcnJvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbGl0aWVzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFwaSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhbiBBcGkgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVybFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRoS2V5XG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGJhc2VVcmwsIGF1dGhLZXkpIHtcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgICAgIHRoaXMuX2F1dGhLZXkgPSBhdXRoS2V5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgY2FyZHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0QWxsQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdCgnR0VUJywgJy9jYXJkcycpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBhIG5ldyBjYXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGlua1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBhZGRDYXJkKHtuYW1lLCBsaW5rfSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QoJ1BPU1QnLCAnL2NhcmRzJywge1xuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe25hbWUsIGxpbmt9KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWxldGUgYSBzcGVjaWZpYyBjYXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGRlbGV0ZUNhcmQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdERUxFVEUnLCAnL2NhcmRzLycgKyBpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlrZSBhIHNwZWNpZmljIGNhcmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgbGlrZUNhcmQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdQVVQnLCAnL2NhcmRzL2xpa2VzLycgKyBpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGlzbGlrZSBhIHNwZWNpZmljIGNhcmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZGlzbGlrZUNhcmQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdERUxFVEUnLCAnL2NhcmRzL2xpa2VzLycgKyBpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHVzZXIncyBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdHRVQnLCAnL3VzZXJzL21lJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHVzZXIncyBpbmZvcm1hdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFib3V0XG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHVwZGF0ZVVzZXJJbmZvKHtuYW1lLCBhYm91dH0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KCdQQVRDSCcsICcvdXNlcnMvbWUnLCB7XG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7bmFtZSwgYWJvdXR9KVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdXNlcidzIGF2YXRhci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdmF0YXJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdXBkYXRlVXNlckF2YXRhcih7YXZhdGFyfSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QoJ1BBVENIJywgJy91c2Vycy9tZS9hdmF0YXInLCB7XG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7YXZhdGFyfSlcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHNlbmRpbmcgdGhlIHJlcXVlc3QgdG8gdGhlIHNlcnZlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0VXJsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9zZW5kUmVxdWVzdChtZXRob2QsIHRhcmdldFVybCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgdGFyZ2V0VXJsLCB7XG4gICAgICAgICAgICBtZXRob2QsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiB0aGlzLl9hdXRoS2V5LFxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNoZWNraW5nIHRoZSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Byb21pc2V9IHJlc3BvbnNlXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfY2hlY2tSZXNwb25zZShyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEFuIGVycm9yIG9jY3VycmVkOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiY2xhc3MgQ2FyZCB7XG4gICAgLy8gU2VsZWN0b3JzIGFuZCBjbGFzc2VzXG4gICAgX2NhcmRTZWxlY3RvciA9ICcuY2FyZCc7XG4gICAgX3RpdGxlU2VsZWN0b3IgPSAnLmNhcmRfX3RpdGxlJztcbiAgICBfaW1hZ2VTZWxlY3RvciA9ICcuY2FyZF9faW1hZ2UnO1xuICAgIF9saWtlQnV0dG9uU2VsZWN0b3IgPSAnLmNhcmRfX2xpa2UtYnV0dG9uJztcbiAgICBfbGlrZUNvdW50ZXJTZWxlY3RvciA9ICcuY2FyZF9fbGlrZS1jb3VudGVyJztcbiAgICBfcmVtb3ZlQnV0dG9uU2VsZWN0b3IgPSAnLmNhcmRfX3JlbW92ZS1idXR0b24nO1xuICAgIF9saWtlQnV0dG9uQWN0aXZlQ2xhc3MgPSAnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBjYXJkIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9pZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGxpbmtcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaWtlc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvd25lclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZVNlbGVjdG9yXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlSW1hZ2VDbGlja1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZUxpa2VDbGlja1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZVJlbW92ZUNsaWNrXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAge19pZCwgbmFtZSwgbGluaywgbGlrZXMsIG93bmVyfSxcbiAgICAgICAgdGVtcGxhdGVTZWxlY3RvcixcbiAgICAgICAge2hhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlUmVtb3ZlQ2xpY2t9LFxuICAgICAgICB1c2VySWRcbiAgICApIHtcbiAgICAgICAgLy8gQ2FyZCdzIGluZm9ybWF0aW9uXG4gICAgICAgIHRoaXMuX2lkID0gX2lkO1xuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XG4gICAgICAgIHRoaXMuX293bmVyID0gb3duZXI7XG5cbiAgICAgICAgLy8gQ2FyZCdzIHRlbXBsYXRlXG4gICAgICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xuXG4gICAgICAgIC8vIEV2ZW50IGhhbmRsaW5nIGNhbGxiYWNrc1xuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgICAgICB0aGlzLl9oYW5kbGVSZW1vdmVDbGljayA9IGhhbmRsZVJlbW92ZUNsaWNrO1xuXG4gICAgICAgIC8vIFRoZSBpZCBvZiB0aGUgbG9nZ2VkLWluIHVzZXJcbiAgICAgICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGEgY2FyZCBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybnMge0VsZW1lbnR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGdlbmVyYXRlRWxlbWVudCgpIHtcbiAgICAgICAgdGhpcy5fY3JlYXRlRnJvbVRlbXBsYXRlKCk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2NoZWNrUGVybWlzc2lvbnMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVMaWtlcygpO1xuXG4gICAgICAgIC8vIENhcmQncyB0aXRsZVxuICAgICAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuXG4gICAgICAgIC8vIENhcmQncyBpbWFnZVxuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhIGNhcmQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICByZW1vdmVFbGVtZW50KCkge1xuICAgICAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGxpa2VzIG9mIHRoZSBjYXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlrZXNcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgdXBkYXRlTGlrZXMoe2xpa2VzfSA9IHt9KSB7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYW4gdXBkYXRlZCByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBsaWtlcyB8fCB0aGlzLl9saWtlcztcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgbG9nZ2VkLWluIHVzZXIgaGFzIGxpa2VkIHRoZSBjYXJkLCBhbmQgY2hhbmdlIGl0cycgc3RhdGUgYWNjb3JkaW5nbHlcbiAgICAgICAgdGhpcy5faXNMaWtlZCgpID8gdGhpcy5fbWFya0xpa2VkKCkgOiB0aGlzLl9tYXJrRGlzbGlrZWQoKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIGNvdW50ZXJcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50ZXJFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGNhcmQgZWxlbWVudCBmcm9tIGRlZmluZWQgdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jcmVhdGVGcm9tVGVtcGxhdGUoKSB7XG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAgICAgICAuY29udGVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgICAgICB0aGlzLl90aXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RpdGxlU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2ltYWdlU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbGlrZUJ1dHRvblNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fbGlrZUNvdW50ZXJFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9saWtlQ291bnRlclNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlQnV0dG9uRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcmVtb3ZlQnV0dG9uU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBldmVudCBsaXN0ZW5lcnMgZm9yIGNhcmQncyBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2spO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLl9pZCwgdGhpcy5faXNMaWtlZCgpKSk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVSZW1vdmVDbGljayh0aGlzLl9pZCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIGN1cnJlbnRseSBsb2dnZWQtaW4gdXNlciBpcyB0aGUgb3duZXIgb2YgdGhlIGNhcmQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jaGVja1Blcm1pc3Npb25zKCkge1xuICAgICAgICAvLyBJZiBub3QsIGRpc2FibGUgdGhlIHJlbW92ZSBidXR0b25cbiAgICAgICAgaWYgKHRoaXMuX293bmVyLl9pZCAhPT0gdGhpcy5fdXNlcklkKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVCdXR0b25FbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgd2hldGhlciB0aGUgY3VycmVudGx5IGxvZ2dlZC1pbiB1c2VyIGhhcyBsaWtlZCB0aGUgY2FyZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2lzTGlrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKHVzZXJEYXRhID0+IHVzZXJEYXRhLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrIHRoZSBjYXJkIGFzIGxpa2VkLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbWFya0xpa2VkKCkge1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2xpa2VCdXR0b25BY3RpdmVDbGFzcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFyayB0aGUgY2FyZCBhcyBkaXNsaWtlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX21hcmtEaXNsaWtlZCgpIHtcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9saWtlQnV0dG9uQWN0aXZlQ2xhc3MpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIERpYWxvZ3VlIHtcbiAgICAvLyBTZWxlY3RvcnMgYW5kIGNsYXNzZXNcbiAgICBfYmFja2dyb3VuZENsYXNzID0gJ2RpYWxvZ3VlJztcbiAgICBfY2xvc2VCdXR0b25DbGFzcyA9ICdkaWFsb2d1ZV9fY2xvc2UtYnV0dG9uJztcbiAgICBfb3BlbmVkQ2xhc3MgPSAnZGlhbG9ndWVfb3BlbmVkJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBkaWFsb2d1ZSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkaWFsb2d1ZVNlbGVjdG9yXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRpYWxvZ3VlU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkaWFsb2d1ZVNlbGVjdG9yKTtcblxuICAgICAgICAvLyBCaW5kIHRoZSBjdXJyZW50IGluc3RhbmNlIHRvIHRoZSBldmVudCBoYW5kbGVyc1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UgPSB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbiB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb3BlbmVkQ2xhc3MpO1xuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9kaWFsb2d1ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcGVuZWRDbGFzcyk7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBmcm9tIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgdGhpcy5fZGlhbG9ndWVFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tDbG9zZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNsb3NpbmcgdGhlIGRpYWxvZ3VlIGlmIFwiZXNjYXBlXCIgd2FzIHByZXNzZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XG4gICAgICAgIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSAmJiB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNsb3NpbmcgdGhlIGRpYWxvZ3VlIGlmIHRoZSB1c2VyIGNsaWNrZWQgb24gdGhlIGJhY2tncm91bmQgLyB0aGUgY2xvc2UgYnV0dG9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9oYW5kbGVDbGlja0Nsb3NlKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuX2JhY2tncm91bmRDbGFzcykgfHxcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fY2xvc2VCdXR0b25DbGFzcykpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGlhbG9ndWU7XG4iLCJpbXBvcnQgRGlhbG9ndWUgZnJvbSAnLi9EaWFsb2d1ZSc7XG5cbmNsYXNzIERpYWxvZ3VlV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIERpYWxvZ3VlIHtcbiAgICAvLyBTZWxlY3RvcnMgYW5kIGNsYXNzZXNcbiAgICBfYnV0dG9uU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX19zdWJtaXQtYnV0dG9uJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBkaWFsb2d1ZSB3aXRoIGFsZXJ0IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGRpYWxvZ3VlU2VsZWN0b3JcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGlhbG9ndWVTZWxlY3Rvcikge1xuICAgICAgICBzdXBlcihkaWFsb2d1ZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2RpYWxvZ3VlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2J1dHRvblNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVuIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmZpcm1hdGlvbkNhbGxiYWNrXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG9wZW4oY29uZmlybWF0aW9uQ2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fY29uZmlybWF0aW9uQ2FsbGJhY2sgPSBjb25maXJtYXRpb25DYWxsYmFjaztcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZCBldmVudCBsaXN0ZW5lcnMgdG8gdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY29uZmlybWF0aW9uQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZnJvbSB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jb25maXJtYXRpb25DYWxsYmFjayk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEaWFsb2d1ZVdpdGhDb25maXJtYXRpb247XG4iLCJpbXBvcnQgRGlhbG9ndWUgZnJvbSAnLi9EaWFsb2d1ZSc7XG5cbmNsYXNzIERpYWxvZ3VlV2l0aEVycm9yIGV4dGVuZHMgRGlhbG9ndWUge1xuICAgIC8vIENvbmZpZ3VyYXRpb25cbiAgICBfaGlkZUFmdGVyU2Vjb25kcyA9IDU7XG5cbiAgICAvLyBTZWxlY3RvcnMgYW5kIGNsYXNzZXNcbiAgICBfcGFyYWdyYXBoU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX19wYXJhZ3JhcGhfcHJpbWFyeSc7XG4gICAgX2NvdW50ZXJTZWxlY3RvciA9ICcuZGlhbG9ndWVfX2NvdW50ZXInO1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIGRpYWxvZ3VlIHdpdGggZXJyb3IgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGlhbG9ndWVTZWxlY3RvclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkaWFsb2d1ZVNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKGRpYWxvZ3VlU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9wYXJhZ3JhcGhFbGVtZW50ID0gdGhpcy5fZGlhbG9ndWVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcGFyYWdyYXBoU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9jb3VudGVyRWxlbWVudCA9IHRoaXMuX2RpYWxvZ3VlRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvdW50ZXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbiB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JNZXNzYWdlXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIG9wZW4oZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICAgICAgdGhpcy5fcGFyYWdyYXBoRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcblxuICAgICAgICAvLyBSZXNldCB0aGUgY291bnRlciwgYW5kIHVwZGF0ZSBpdCBldmVyeSBzZWNvbmRcbiAgICAgICAgdGhpcy5fY291bnRlckVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9oaWRlQWZ0ZXJTZWNvbmRzO1xuICAgICAgICB0aGlzLl9pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fY291bnRlckVsZW1lbnQudGV4dENvbnRlbnQgLT0gMTtcbiAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgLy8gSGlkZSB0aGUgZXJyb3IgYWZ0ZXIgNSBzZWNvbmRzLCBhbmQgZGlzYWJsZSB0aGUgY291bnRlclxuICAgICAgICB0aGlzLl90aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuY2xvc2UoKSwgdGhpcy5faGlkZUFmdGVyU2Vjb25kcyAqIDEwMDApO1xuXG4gICAgICAgIC8vIEluIGFkZGl0aW9uIHRvIHRoZSBkaWFsb2d1ZSwgbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsSWQpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dElkKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERpYWxvZ3VlV2l0aEVycm9yO1xuIiwiaW1wb3J0IERpYWxvZ3VlIGZyb20gJy4vRGlhbG9ndWUnO1xuXG5jbGFzcyBEaWFsb2d1ZVdpdGhGb3JtIGV4dGVuZHMgRGlhbG9ndWUge1xuICAgIC8vIFNlbGVjdG9ycyBhbmQgY2xhc3Nlc1xuICAgIF9mb3JtU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX19mb3JtJztcbiAgICBfYnV0dG9uU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX19zdWJtaXQtYnV0dG9uJztcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBkaWFsb2d1ZSB3aXRoIGZvcm0gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGlhbG9ndWVTZWxlY3RvclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHN1Ym1pc3Npb25DYWxsYmFja1xuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkaWFsb2d1ZVNlbGVjdG9yLCBzdWJtaXNzaW9uQ2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIoZGlhbG9ndWVTZWxlY3Rvcik7XG5cbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9kaWFsb2d1ZUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZGlhbG9ndWVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fYnV0dG9uU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9zdWJtaXNzaW9uQ2FsbGJhY2sgPSBzdWJtaXNzaW9uQ2FsbGJhY2s7XG5cbiAgICAgICAgLy8gQmluZCB0aGUgY3VycmVudCBpbnN0YW5jZSB0byB0aGUgZXZlbnQgaGFuZGxlclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWlzc2lvbiA9IHRoaXMuX2hhbmRsZUZvcm1TdWJtaXNzaW9uLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBkZWZhdWx0IGlucHV0IHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnB1dHNMaXN0XG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNldElucHV0VmFsdWVzKGlucHV0c0xpc3QpIHtcbiAgICAgICAgZm9yIChjb25zdCBpbnB1dE5hbWUgaW4gaW5wdXRzTGlzdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Zvcm1FbGVtZW50LmVsZW1lbnRzW2lucHV0TmFtZV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5lbGVtZW50c1tpbnB1dE5hbWVdLnZhbHVlID0gaW5wdXRzTGlzdFtpbnB1dE5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGxvYWRpbmcgc3RhdGU7IHVzZWQgd2hlbiB3YWl0aW5nIGZvciByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzTG9hZGluZ1xuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzZXRMb2FkaW5nU3RhdGUoaXNMb2FkaW5nKSB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQudGV4dENvbnRlbnQgPSAnU2F2aW5nLi4uJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQudGV4dENvbnRlbnQgPSAnU2F2ZSc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGQgZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSBkaWFsb2d1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5faGFuZGxlRm9ybVN1Ym1pc3Npb24pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZnJvbSB0aGUgZGlhbG9ndWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXNzaW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGhlIHN1Ym1pc3Npb24gb2YgdGhlIGZvcm0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2hhbmRsZUZvcm1TdWJtaXNzaW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuX3N1Ym1pc3Npb25DYWxsYmFjayh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGlucHV0IHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0c0xpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LmVsZW1lbnRzKTtcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcblxuICAgICAgICBpbnB1dHNMaXN0LmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGlucHV0VmFsdWVzW2lucHV0RWxlbWVudC5uYW1lXSA9IGlucHV0RWxlbWVudC52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGlhbG9ndWVXaXRoRm9ybTtcbiIsImltcG9ydCBEaWFsb2d1ZSBmcm9tICcuL0RpYWxvZ3VlJztcblxuY2xhc3MgRGlhbG9ndWVXaXRoSW1hZ2UgZXh0ZW5kcyBEaWFsb2d1ZSB7XG4gICAgLy8gU2VsZWN0b3JzIGFuZCBjbGFzc2VzXG4gICAgX2ltYWdlU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX19pbWFnZSc7XG4gICAgX2NhcHRpb25TZWxlY3RvciA9ICcuZGlhbG9ndWVfX2NhcHRpb24nO1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIGRpYWxvZ3VlIHdpdGggaW1hZ2UgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGlhbG9ndWVTZWxlY3RvclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkaWFsb2d1ZVNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKGRpYWxvZ3VlU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSB0aGlzLl9kaWFsb2d1ZUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9pbWFnZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQgPSB0aGlzLl9kaWFsb2d1ZUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXB0aW9uU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW4gdGhlIGRpYWxvZ3VlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGlua1xuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBvcGVuKHtuYW1lLCBsaW5rfSkge1xuICAgICAgICBzdXBlci5vcGVuKCk7XG5cbiAgICAgICAgLy8gRGlhbG9ndWUncyBpbWFnZVxuICAgICAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTtcbiAgICAgICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XG5cbiAgICAgICAgLy8gRGlhbG9ndWUncyBjYXB0aW9uXG4gICAgICAgIHRoaXMuX2NhcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERpYWxvZ3VlV2l0aEltYWdlO1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIGZvcm0gdmFsaWRhdG9yIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBmb3JtRWxlbWVudFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB2YWxpZGF0aW9uU2V0dGluZ3NcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZm9ybUVsZW1lbnQsIHZhbGlkYXRpb25TZXR0aW5ncykge1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgICAgICB0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3MgPSB2YWxpZGF0aW9uU2V0dGluZ3M7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlIGZvcm0gdmFsaWRhdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICB0aGlzLl9hbmFseXplRm9ybSgpO1xuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpO1xuXG4gICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIGlucHV0cyBsaXN0LCBhbmQgYXR0YWNoIHRvIGVhY2ggYW4gZXZlbnQgbGlzdGVuZXIgd2hpY2ggd2F0Y2hlcyBmb3IgY2hhbmdlc1xuICAgICAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE1ha2UgdGhlIHN1Ym1pdCBidXR0b24gZGlzYWJsZWQgYWdhaW4gYWZ0ZXIgdGhlIGZvcm0gaXMgcmVzZXRcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCAoKSA9PiB0aGlzLl9tYWtlU3VibWl0QnV0dG9uRGlzYWJsZWQoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQW5hbHl6ZSB0aGUgcGFzc2VkIGZvcm0gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2FuYWx5emVGb3JtKCkge1xuICAgICAgICAvLyBHZXQgYWxsIHRoZSBpbnB1dHNcbiAgICAgICAgdGhpcy5faW5wdXRzTGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc3VibWl0IGJ1dHRvblxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZSB3aGV0aGVyIGFuIGlucHV0IGhhcyBhbiBlcnJvci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gaW5wdXRFbGVtZW50XG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2UgYW4gaW5wdXQgZXJyb3IgdmlzaWJsZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gaW5wdXRFbGVtZW50XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yTWVzc2FnZVxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2dldElucHV0RXJyb3JFbGVtZW50KGlucHV0RWxlbWVudCk7XG5cbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5lcnJvclZpc2libGVDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIGFuIGlucHV0IGVycm9yIGhpZGRlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnB1dEVsZW1lbnRcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZ2V0SW5wdXRFcnJvckVsZW1lbnQoaW5wdXRFbGVtZW50KTtcblxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmVycm9yVmlzaWJsZUNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSB0aGUgZXJyb3IgZWxlbWVudCBvZiBhIHNwZWNpZmljIGlucHV0IGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGlucHV0RWxlbWVudFxuICAgICAqIEByZXR1cm5zIHtFbGVtZW50fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2dldElucHV0RXJyb3JFbGVtZW50KGlucHV0RWxlbWVudCkge1xuICAgICAgICBjb25zdCBlcnJvclNlbGVjdG9yID0gdGhpcy5fdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3JTZWxlY3RvclxuICAgICAgICAgICAgLnJlcGxhY2UoJyVmb3JtSWQnLCB0aGlzLl9mb3JtRWxlbWVudC5pZClcbiAgICAgICAgICAgIC5yZXBsYWNlKCclaW5wdXROYW1lJywgaW5wdXRFbGVtZW50Lm5hbWUpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGVycm9yU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZSB0aGUgc3RhdGUgb2YgdGhlIHN1Ym1pdCBidXR0b24gKGFjdGl2ZSAvIGRpc2FibGVkKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3RvZ2dsZVN1Ym1pdEJ1dHRvblN0YXRlKCkge1xuICAgICAgICB0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSA/IHRoaXMuX21ha2VTdWJtaXRCdXR0b25EaXNhYmxlZCgpIDogdGhpcy5fbWFrZVN1Ym1pdEJ1dHRvbkFjdGl2ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIHdoZXRoZXIgYWxsIGlucHV0cyBhcmUgdmFsaWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dHNMaXN0LnNvbWUoaW5wdXRFbGVtZW50ID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2UgdGhlIHN1Ym1pdCBidXR0b24gYWN0aXZlLlxuICAgICAqXG4gICAgICogQHJldHVybnMge3ZvaWR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbWFrZVN1Ym1pdEJ1dHRvbkFjdGl2ZSgpIHtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRpb25TZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2UgdGhlIHN1Ym1pdCBidXR0b24gZGlzYWJsZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9tYWtlU3VibWl0QnV0dG9uRGlzYWJsZWQoKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0aW9uU2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImNsYXNzIFNlY3Rpb24ge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgYSBzZWN0aW9uIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRhaW5lclNlbGVjdG9yXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVuZGVyZXJDYWxsYmFja1xuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJTZWxlY3RvciwgcmVuZGVyZXJDYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9jb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyQ2FsbGJhY2sgPSByZW5kZXJlckNhbGxiYWNrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbmRlciBpdGVtcyBmcm9tIGxpc3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgcmVuZGVySXRlbXMoaXRlbXNMaXN0KSB7XG4gICAgICAgIGl0ZW1zTGlzdC5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVuZGVyZXJDYWxsYmFjayhpdGVtKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIGVsZW1lbnQgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgc2VjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBhZGRFbGVtZW50Rmlyc3QoZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXJFbGVtZW50LnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIGVsZW1lbnQgdG8gdGhlIGVuZCBvZiB0aGUgc2VjdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBhZGRFbGVtZW50TGFzdChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQuYXBwZW5kKGVsZW1lbnQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImNsYXNzIFVzZXJJbmZvIHtcbiAgICAvLyBEZWZhdWx0IGluZm9ybWF0aW9uXG4gICAgX2lkID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZSBhIHVzZXIgaW5mbyBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lU2VsZWN0b3JcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWJvdXRTZWxlY3RvclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBhdmF0YXJTZWxlY3RvclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih7bmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcn0pIHtcbiAgICAgICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Fib3V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSB1c2VyJ3MgaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB0aGlzLl9pZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyRWxlbWVudC5zcmNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdXNlcidzIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IF9pZFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGFib3V0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF2YXRhclxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBzZXRVc2VySW5mbyh7X2lkLCBuYW1lLCBhYm91dCwgYXZhdGFyfSkge1xuICAgICAgICB0aGlzLl9pZCA9IF9pZCB8fCB0aGlzLl9pZDtcbiAgICAgICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICAgICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXI7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcbiIsImV4cG9ydCBjb25zdCBhcGlCYXNlVXJsID0gJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTInO1xuZXhwb3J0IGNvbnN0IGFwaUF1dGhLZXkgPSAnMTkwZTk0ODYtY2Y4NC00MzcwLWFhNDItODA4MzExNTJhZDgyJztcblxuZXhwb3J0IGNvbnN0IGJ1dHRvbkNhcmRBZGRTZWxlY3RvciA9ICcucHJvZmlsZV9fYWRkLWJ1dHRvbic7XG5leHBvcnQgY29uc3QgYnV0dG9uUHJvZmlsZUNoYW5nZVBpY3R1cmVTZWxlY3RvciA9ICcucHJvZmlsZV9fYXZhdGFyLW92ZXJsYXknO1xuZXhwb3J0IGNvbnN0IGJ1dHRvblByb2ZpbGVFZGl0U2VsZWN0b3IgPSAnLnByb2ZpbGVfX2VkaXQtYnV0dG9uJztcblxuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyU2VsZWN0b3IgPSAnLmNhcmRzX19saXN0JztcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGVTZWxlY3RvciA9ICcjY2FyZC10ZW1wbGF0ZSc7XG5cbmV4cG9ydCBjb25zdCBkaWFsb2d1ZUNhcmRBZGRTZWxlY3RvciA9ICcuZGlhbG9ndWVfdHlwZV9jYXJkLWFkZCc7XG5leHBvcnQgY29uc3QgZGlhbG9ndWVDYXJkUmVtb3ZlU2VsZWN0b3IgPSAnLmRpYWxvZ3VlX3R5cGVfY2FyZC1yZW1vdmUnO1xuZXhwb3J0IGNvbnN0IGRpYWxvZ3VlQ2FyZFZpZXdTZWxlY3RvciA9ICcuZGlhbG9ndWVfdHlwZV9jYXJkLXZpZXcnO1xuZXhwb3J0IGNvbnN0IGRpYWxvZ3VlRXJyb3JTZWxlY3RvciA9ICcuZGlhbG9ndWVfdHlwZV9lcnJvcic7XG5leHBvcnQgY29uc3QgZGlhbG9ndWVQcm9maWxlQ2hhbmdlUGljdHVyZVNlbGVjdG9yID0gJy5kaWFsb2d1ZV90eXBlX3Byb2ZpbGUtY2hhbmdlLXBpY3R1cmUnO1xuZXhwb3J0IGNvbnN0IGRpYWxvZ3VlUHJvZmlsZUVkaXRTZWxlY3RvciA9ICcuZGlhbG9ndWVfdHlwZV9wcm9maWxlLWVkaXQnO1xuXG5leHBvcnQgY29uc3QgdXNlckluZm9BYm91dFNlbGVjdG9yID0gJy5wcm9maWxlX19zdWJ0aXRsZSc7XG5leHBvcnQgY29uc3QgdXNlckluZm9BdmF0YXJTZWxlY3RvciA9ICcucHJvZmlsZV9fYXZhdGFyLWltYWdlJztcbmV4cG9ydCBjb25zdCB1c2VySW5mb05hbWVTZWxlY3RvciA9ICcucHJvZmlsZV9fdGl0bGUtdGV4dCc7XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gICAgZm9ybVNlbGVjdG9yOiAnLmRpYWxvZ3VlX19mb3JtJyxcbiAgICBpbnB1dFNlbGVjdG9yOiAnLmRpYWxvZ3VlX19mb3JtLWZpZWxkJyxcbiAgICBpbnB1dEVycm9yU2VsZWN0b3I6ICcuJWZvcm1JZC0laW5wdXROYW1lLWVycm9yJyxcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5kaWFsb2d1ZV9fc3VibWl0LWJ1dHRvbicsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2RpYWxvZ3VlX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkJyxcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdkaWFsb2d1ZV9fZm9ybS1maWVsZF9oYXMtZXJyb3InLFxuICAgIGVycm9yVmlzaWJsZUNsYXNzOiAnZGlhbG9ndWVfX2Zvcm0tZXJyb3JfdmlzaWJsZSdcbn07XG4iLCJpbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZCc7XG5pbXBvcnQgRGlhbG9ndWVXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoQ29uZmlybWF0aW9uJztcbmltcG9ydCBEaWFsb2d1ZVdpdGhFcnJvciBmcm9tICcuLi9jb21wb25lbnRzL0RpYWxvZ3VlV2l0aEVycm9yJztcbmltcG9ydCBEaWFsb2d1ZVdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvRGlhbG9ndWVXaXRoRm9ybSc7XG5pbXBvcnQgRGlhbG9ndWVXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9EaWFsb2d1ZVdpdGhJbWFnZSc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3InO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvJztcbmltcG9ydCB7XG4gICAgYXBpQXV0aEtleSxcbiAgICBhcGlCYXNlVXJsLFxuICAgIGJ1dHRvbkNhcmRBZGRTZWxlY3RvcixcbiAgICBidXR0b25Qcm9maWxlQ2hhbmdlUGljdHVyZVNlbGVjdG9yLFxuICAgIGJ1dHRvblByb2ZpbGVFZGl0U2VsZWN0b3IsXG4gICAgY2FyZHNDb250YWluZXJTZWxlY3RvcixcbiAgICBjYXJkVGVtcGxhdGVTZWxlY3RvcixcbiAgICBkaWFsb2d1ZUNhcmRBZGRTZWxlY3RvcixcbiAgICBkaWFsb2d1ZUNhcmRSZW1vdmVTZWxlY3RvcixcbiAgICBkaWFsb2d1ZUNhcmRWaWV3U2VsZWN0b3IsXG4gICAgZGlhbG9ndWVFcnJvclNlbGVjdG9yLFxuICAgIGRpYWxvZ3VlUHJvZmlsZUNoYW5nZVBpY3R1cmVTZWxlY3RvcixcbiAgICBkaWFsb2d1ZVByb2ZpbGVFZGl0U2VsZWN0b3IsXG4gICAgdXNlckluZm9BYm91dFNlbGVjdG9yLFxuICAgIHVzZXJJbmZvQXZhdGFyU2VsZWN0b3IsXG4gICAgdXNlckluZm9OYW1lU2VsZWN0b3IsXG4gICAgdmFsaWRhdGlvblNldHRpbmdzXG59IGZyb20gJy4uL3V0aWxpdGllcy9jb25zdGFudHMnO1xuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbi8qXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIElOU1RBTkNFU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXBpLlxuICpcbiAqIEB0eXBlIHtBcGl9XG4gKi9cbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQmFzZVVybCwgYXBpQXV0aEtleSk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIFNlY3Rpb24gZm9yIHRoZSBjYXJkcyBjb250YWluZXIuXG4gKlxuICogQHR5cGUge1NlY3Rpb259XG4gKi9cbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gbmV3IFNlY3Rpb24oXG4gICAgY2FyZHNDb250YWluZXJTZWxlY3RvcixcbiAgICBjYXJkRGF0YSA9PiBjYXJkc0NvbnRhaW5lci5hZGRFbGVtZW50TGFzdChcbiAgICAgICAgY3JlYXRlQ2FyZChjYXJkRGF0YSlcbiAgICApXG4pO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBEaWFsb2d1ZVdpdGhGb3JtIGZvciB0aGUgY2FyZC1hZGQgZGlhbG9ndWUuXG4gKlxuICogQHR5cGUge0RpYWxvZ3VlV2l0aEZvcm19XG4gKi9cbmNvbnN0IGRpYWxvZ3VlQ2FyZEFkZCA9IG5ldyBEaWFsb2d1ZVdpdGhGb3JtKGRpYWxvZ3VlQ2FyZEFkZFNlbGVjdG9yLCBpbnB1dHNMaXN0ID0+IHtcbiAgICBkaWFsb2d1ZUNhcmRBZGQuc2V0TG9hZGluZ1N0YXRlKHRydWUpO1xuXG4gICAgYXBpLmFkZENhcmQoaW5wdXRzTGlzdClcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgY2FyZHNDb250YWluZXIuYWRkRWxlbWVudEZpcnN0KGNyZWF0ZUNhcmQocmVzcG9uc2UpKTtcbiAgICAgICAgICAgIGRpYWxvZ3VlQ2FyZEFkZC5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4gZGlhbG9ndWVFcnJvci5vcGVuKGVycm9yKSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4gZGlhbG9ndWVDYXJkQWRkLnNldExvYWRpbmdTdGF0ZShmYWxzZSkpO1xufSk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIERpYWxvZ3VlV2l0aENvbmZpcm1hdGlvbiBmb3IgdGhlIGNhcmQtcmVtb3ZlIGRpYWxvZ3VlLlxuICpcbiAqIEB0eXBlIHtEaWFsb2d1ZVdpdGhDb25maXJtYXRpb259XG4gKi9cbmNvbnN0IGRpYWxvZ3VlQ2FyZFJlbW92ZSA9IG5ldyBEaWFsb2d1ZVdpdGhDb25maXJtYXRpb24oZGlhbG9ndWVDYXJkUmVtb3ZlU2VsZWN0b3IpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBEaWFsb2d1ZVdpdGhJbWFnZSBmb3IgdGhlIGNhcmQtdmlldyBkaWFsb2d1ZS5cbiAqXG4gKiBAdHlwZSB7RGlhbG9ndWVXaXRoSW1hZ2V9XG4gKi9cbmNvbnN0IGRpYWxvZ3VlQ2FyZFZpZXcgPSBuZXcgRGlhbG9ndWVXaXRoSW1hZ2UoZGlhbG9ndWVDYXJkVmlld1NlbGVjdG9yKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgRGlhbG9ndWVXaXRoRXJyb3IgZm9yIHRoZSBlcnJvciBkaWFsb2d1ZS5cbiAqXG4gKiBAdHlwZSB7RGlhbG9ndWVXaXRoRXJyb3J9XG4gKi9cbmNvbnN0IGRpYWxvZ3VlRXJyb3IgPSBuZXcgRGlhbG9ndWVXaXRoRXJyb3IoZGlhbG9ndWVFcnJvclNlbGVjdG9yKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgRGlhbG9ndWVXaXRoRm9ybSBmb3IgdGhlIHByb2ZpbGUtY2hhbmdlLXBpY3R1cmUgZGlhbG9ndWUuXG4gKlxuICogQHR5cGUge0RpYWxvZ3VlV2l0aEZvcm19XG4gKi9cbmNvbnN0IGRpYWxvZ3VlUHJvZmlsZUNoYW5nZVBpY3R1cmUgPSBuZXcgRGlhbG9ndWVXaXRoRm9ybShkaWFsb2d1ZVByb2ZpbGVDaGFuZ2VQaWN0dXJlU2VsZWN0b3IsIGlucHV0c0xpc3QgPT4ge1xuICAgIGRpYWxvZ3VlUHJvZmlsZUNoYW5nZVBpY3R1cmUuc2V0TG9hZGluZ1N0YXRlKHRydWUpO1xuXG4gICAgYXBpLnVwZGF0ZVVzZXJBdmF0YXIoaW5wdXRzTGlzdClcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzcG9uc2UpO1xuICAgICAgICAgICAgZGlhbG9ndWVQcm9maWxlQ2hhbmdlUGljdHVyZS5jbG9zZSgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4gZGlhbG9ndWVFcnJvci5vcGVuKGVycm9yKSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4gZGlhbG9ndWVQcm9maWxlQ2hhbmdlUGljdHVyZS5zZXRMb2FkaW5nU3RhdGUoZmFsc2UpKTtcbn0pO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBEaWFsb2d1ZVdpdGhGb3JtIGZvciB0aGUgcHJvZmlsZS1lZGl0IGRpYWxvZ3VlLlxuICpcbiAqIEB0eXBlIHtEaWFsb2d1ZVdpdGhGb3JtfVxuICovXG5jb25zdCBkaWFsb2d1ZVByb2ZpbGVFZGl0ID0gbmV3IERpYWxvZ3VlV2l0aEZvcm0oZGlhbG9ndWVQcm9maWxlRWRpdFNlbGVjdG9yLCBpbnB1dHNMaXN0ID0+IHtcbiAgICBkaWFsb2d1ZVByb2ZpbGVFZGl0LnNldExvYWRpbmdTdGF0ZSh0cnVlKTtcblxuICAgIGFwaS51cGRhdGVVc2VySW5mbyhpbnB1dHNMaXN0KVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXNwb25zZSk7XG4gICAgICAgICAgICBkaWFsb2d1ZVByb2ZpbGVFZGl0LmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiBkaWFsb2d1ZUVycm9yLm9wZW4oZXJyb3IpKVxuICAgICAgICAuZmluYWxseSgoKSA9PiBkaWFsb2d1ZVByb2ZpbGVFZGl0LnNldExvYWRpbmdTdGF0ZShmYWxzZSkpO1xufSk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIFVzZXJJbmZvIGZvciB0aGUgdXNlciBwcm9maWxlLlxuICpcbiAqIEB0eXBlIHtVc2VySW5mb31cbiAqL1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICAgIG5hbWVTZWxlY3RvcjogdXNlckluZm9OYW1lU2VsZWN0b3IsXG4gICAgYWJvdXRTZWxlY3RvcjogdXNlckluZm9BYm91dFNlbGVjdG9yLFxuICAgIGF2YXRhclNlbGVjdG9yOiB1c2VySW5mb0F2YXRhclNlbGVjdG9yXG59KTtcblxuLypcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRlVOQ1RJT05TXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG4vKipcbiAqIEdldCB0aGUgaW5pdGlhbCBkYXRhIGZyb20gdGhlIHNlcnZlciwgYW5kIHVwZGF0ZSB0aGUgcGFnZSBhY2NvcmRpbmdseS5cbiAqXG4gKiBAcmV0dXJucyB7dm9pZH1cbiAqL1xuY29uc3QgbG9hZEluaXRpYWxEYXRhID0gKCkgPT4ge1xuICAgIC8vIERpc3BsYXkgYSBsb2FkaW5nIG1lc3NhZ2Ugd2hpbGUgd2FpdGluZyBmb3IgcmVzcG9uc2VcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgIC4uLnVzZXJJbmZvLmdldFVzZXJJbmZvKCksXG4gICAgICAgIG5hbWU6ICdMb2FkaW5nLi4uJ1xuICAgIH0pO1xuXG4gICAgLy8gT3JkZXIgb2YgZXhlY3V0aW9uIGlzIGltcG9ydGFudCBoZXJlXG4gICAgUHJvbWlzZVxuICAgICAgICAuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEFsbENhcmRzKCldKVxuICAgICAgICAudGhlbigoW3VzZXJSZXNwb25zZSwgY2FyZHNSZXNwb25zZV0pID0+IHtcbiAgICAgICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJSZXNwb25zZSk7XG4gICAgICAgICAgICBjYXJkc0NvbnRhaW5lci5yZW5kZXJJdGVtcyhjYXJkc1Jlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IGRpYWxvZ3VlRXJyb3Iub3BlbihlcnJvcikpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgRm9ybVZhbGlkYXRvciBmb3IgZWFjaCBmb3JtIG9uIHRoZSBwYWdlLlxuICpcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5jb25zdCBhZGRWYWxpZGF0aW9uVG9Gb3JtcyA9ICgpID0+IHtcbiAgICBjb25zdCBmb3Jtc0xpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGlvblNldHRpbmdzLmZvcm1TZWxlY3RvcikpO1xuXG4gICAgZm9ybXNMaXN0LmZvckVhY2goZm9ybUVsZW1lbnQgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZGF0b3JPYmogPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWxlbWVudCwgdmFsaWRhdGlvblNldHRpbmdzKTtcbiAgICAgICAgdmFsaWRhdG9yT2JqLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgICB9KTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgY2FyZCB3aGljaCBvcGVucyBhIGRpYWxvZ3VlIHdoZW4gY2xpY2tlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY2FyZERhdGFcbiAqIEByZXR1cm5zIHtFbGVtZW50fVxuICovXG5jb25zdCBjcmVhdGVDYXJkID0gY2FyZERhdGEgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgICAgY2FyZERhdGEsXG4gICAgICAgIGNhcmRUZW1wbGF0ZVNlbGVjdG9yLFxuICAgICAgICB7XG4gICAgICAgICAgICBoYW5kbGVJbWFnZUNsaWNrOiAoKSA9PiBkaWFsb2d1ZUNhcmRWaWV3Lm9wZW4oY2FyZERhdGEpLFxuICAgICAgICAgICAgaGFuZGxlTGlrZUNsaWNrOiAoY2FyZElkLCBpc0xpa2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTGlrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBpLmRpc2xpa2VDYXJkKGNhcmRJZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IGNhcmQudXBkYXRlTGlrZXMocmVzcG9uc2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGRpYWxvZ3VlRXJyb3Iub3BlbihlcnJvcikpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFwaS5saWtlQ2FyZChjYXJkSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiBjYXJkLnVwZGF0ZUxpa2VzKHJlc3BvbnNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiBkaWFsb2d1ZUVycm9yLm9wZW4oZXJyb3IpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFuZGxlUmVtb3ZlQ2xpY2s6IGNhcmRJZCA9PiB7XG4gICAgICAgICAgICAgICAgZGlhbG9ndWVDYXJkUmVtb3ZlLm9wZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5yZW1vdmVFbGVtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9ndWVDYXJkUmVtb3ZlLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IGRpYWxvZ3VlRXJyb3Iub3BlbihlcnJvcikpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB1c2VySW5mby5nZXRVc2VySW5mbygpLmlkXG4gICAgKTtcblxuICAgIHJldHVybiBjYXJkLmdlbmVyYXRlRWxlbWVudCgpO1xufVxuXG4vKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBFWEVDVVRJT05TXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG4vLyBDb25uZWN0IHRoZSBjYXJkLWFkZCBidXR0b24gdG8gdGhlIHJlbGF0ZWQgZGlhbG9ndWVcbmNvbnN0IGJ1dHRvbkNhcmRBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJ1dHRvbkNhcmRBZGRTZWxlY3Rvcik7XG5idXR0b25DYXJkQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gZGlhbG9ndWVDYXJkQWRkLm9wZW4oKSk7XG5cbi8vIENvbm5lY3QgdGhlIHByb2ZpbGUtY2hhbmdlLXBpY3R1cmUgYnV0dG9uIHRvIHRoZSByZWxhdGVkIGRpYWxvZ3VlXG5jb25zdCBidXR0b25Qcm9maWxlQ2hhbmdlUGljdHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uUHJvZmlsZUNoYW5nZVBpY3R1cmVTZWxlY3Rvcik7XG5idXR0b25Qcm9maWxlQ2hhbmdlUGljdHVyZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGRpYWxvZ3VlUHJvZmlsZUNoYW5nZVBpY3R1cmUub3BlbigpKTtcblxuLy8gQ29ubmVjdCB0aGUgcHJvZmlsZS1lZGl0IGJ1dHRvbiB0byB0aGUgcmVsYXRlZCBkaWFsb2d1ZVxuY29uc3QgYnV0dG9uUHJvZmlsZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJ1dHRvblByb2ZpbGVFZGl0U2VsZWN0b3IpO1xuYnV0dG9uUHJvZmlsZUVkaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZGlhbG9ndWVQcm9maWxlRWRpdC5zZXRJbnB1dFZhbHVlcyh1c2VySW5mby5nZXRVc2VySW5mbygpKTtcbiAgICBkaWFsb2d1ZVByb2ZpbGVFZGl0Lm9wZW4oKTtcbn0pO1xuXG5sb2FkSW5pdGlhbERhdGEoKTtcbmFkZFZhbGlkYXRpb25Ub0Zvcm1zKCk7XG4iXSwibmFtZXMiOlsiQXBpIiwiYmFzZVVybCIsImF1dGhLZXkiLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfYXV0aEtleSIsIl9zZW5kUmVxdWVzdCIsIm5hbWUiLCJsaW5rIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJpZCIsImFib3V0IiwiYXZhdGFyIiwibWV0aG9kIiwidGFyZ2V0VXJsIiwib3B0aW9ucyIsImZldGNoIiwiaGVhZGVycyIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsInJlc3BvbnNlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJDYXJkIiwidGVtcGxhdGVTZWxlY3RvciIsInVzZXJJZCIsIl9pZCIsImxpa2VzIiwib3duZXIiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlUmVtb3ZlQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwiX2xpa2VzIiwiX293bmVyIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfaGFuZGxlUmVtb3ZlQ2xpY2siLCJfdXNlcklkIiwiX2NyZWF0ZUZyb21UZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9jaGVja1Blcm1pc3Npb25zIiwidXBkYXRlTGlrZXMiLCJfdGl0bGVFbGVtZW50IiwidGV4dENvbnRlbnQiLCJfaW1hZ2VFbGVtZW50IiwiYWx0Iiwic3JjIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiX2lzTGlrZWQiLCJfbWFya0xpa2VkIiwiX21hcmtEaXNsaWtlZCIsIl9saWtlQ291bnRlckVsZW1lbnQiLCJsZW5ndGgiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiX2NhcmRTZWxlY3RvciIsImNsb25lTm9kZSIsIl90aXRsZVNlbGVjdG9yIiwiX2ltYWdlU2VsZWN0b3IiLCJfbGlrZUJ1dHRvbkVsZW1lbnQiLCJfbGlrZUJ1dHRvblNlbGVjdG9yIiwiX2xpa2VDb3VudGVyU2VsZWN0b3IiLCJfcmVtb3ZlQnV0dG9uRWxlbWVudCIsIl9yZW1vdmVCdXR0b25TZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzb21lIiwidXNlckRhdGEiLCJjbGFzc0xpc3QiLCJhZGQiLCJfbGlrZUJ1dHRvbkFjdGl2ZUNsYXNzIiwiRGlhbG9ndWUiLCJkaWFsb2d1ZVNlbGVjdG9yIiwiX2RpYWxvZ3VlRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJfaGFuZGxlQ2xpY2tDbG9zZSIsIl9vcGVuZWRDbGFzcyIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiX2JhY2tncm91bmRDbGFzcyIsIl9jbG9zZUJ1dHRvbkNsYXNzIiwiRGlhbG9ndWVXaXRoQ29uZmlybWF0aW9uIiwiX2J1dHRvbkVsZW1lbnQiLCJfYnV0dG9uU2VsZWN0b3IiLCJjb25maXJtYXRpb25DYWxsYmFjayIsIl9jb25maXJtYXRpb25DYWxsYmFjayIsIkRpYWxvZ3VlV2l0aEVycm9yIiwiX3BhcmFncmFwaEVsZW1lbnQiLCJfcGFyYWdyYXBoU2VsZWN0b3IiLCJfY291bnRlckVsZW1lbnQiLCJfY291bnRlclNlbGVjdG9yIiwiZXJyb3JNZXNzYWdlIiwiX2hpZGVBZnRlclNlY29uZHMiLCJfaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiX3RpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJjb25zb2xlIiwiZXJyb3IiLCJjbGVhckludGVydmFsIiwiY2xlYXJUaW1lb3V0IiwiRGlhbG9ndWVXaXRoRm9ybSIsInN1Ym1pc3Npb25DYWxsYmFjayIsIl9mb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfc3VibWlzc2lvbkNhbGxiYWNrIiwiX2hhbmRsZUZvcm1TdWJtaXNzaW9uIiwicmVzZXQiLCJpbnB1dHNMaXN0IiwiaW5wdXROYW1lIiwiZWxlbWVudHMiLCJ2YWx1ZSIsImlzTG9hZGluZyIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiQXJyYXkiLCJmcm9tIiwiaW5wdXRWYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiRGlhbG9ndWVXaXRoSW1hZ2UiLCJfY2FwdGlvbkVsZW1lbnQiLCJfY2FwdGlvblNlbGVjdG9yIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwidmFsaWRhdGlvblNldHRpbmdzIiwiX3ZhbGlkYXRpb25TZXR0aW5ncyIsIl9hbmFseXplRm9ybSIsIl90b2dnbGVTdWJtaXRCdXR0b25TdGF0ZSIsIl9pbnB1dHNMaXN0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9tYWtlU3VibWl0QnV0dG9uRGlzYWJsZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfZ2V0SW5wdXRFcnJvckVsZW1lbnQiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvclZpc2libGVDbGFzcyIsImVycm9yU2VsZWN0b3IiLCJpbnB1dEVycm9yU2VsZWN0b3IiLCJyZXBsYWNlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9tYWtlU3VibWl0QnV0dG9uQWN0aXZlIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXJDYWxsYmFjayIsIl9jb250YWluZXJFbGVtZW50IiwiX3JlbmRlcmVyQ2FsbGJhY2siLCJpdGVtc0xpc3QiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJhcHBlbmQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsInVuZGVmaW5lZCIsIl9uYW1lRWxlbWVudCIsIl9hYm91dEVsZW1lbnQiLCJfYXZhdGFyRWxlbWVudCIsImZvcm1TZWxlY3RvciIsImFwaSIsImNhcmRzQ29udGFpbmVyIiwiY2FyZERhdGEiLCJhZGRFbGVtZW50TGFzdCIsImNyZWF0ZUNhcmQiLCJkaWFsb2d1ZUNhcmRBZGQiLCJzZXRMb2FkaW5nU3RhdGUiLCJhZGRDYXJkIiwiYWRkRWxlbWVudEZpcnN0IiwiY2F0Y2giLCJkaWFsb2d1ZUVycm9yIiwib3BlbiIsImZpbmFsbHkiLCJkaWFsb2d1ZUNhcmRSZW1vdmUiLCJkaWFsb2d1ZUNhcmRWaWV3IiwiZGlhbG9ndWVQcm9maWxlQ2hhbmdlUGljdHVyZSIsInVwZGF0ZVVzZXJBdmF0YXIiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiZGlhbG9ndWVQcm9maWxlRWRpdCIsInVwZGF0ZVVzZXJJbmZvIiwiY2FyZCIsImNhcmRJZCIsImlzTGlrZWQiLCJkaXNsaWtlQ2FyZCIsImxpa2VDYXJkIiwiZGVsZXRlQ2FyZCIsInJlbW92ZUVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImdlbmVyYXRlRWxlbWVudCIsInNldElucHV0VmFsdWVzIiwiYWxsIiwiZ2V0QWxsQ2FyZHMiLCJ1c2VyUmVzcG9uc2UiLCJjYXJkc1Jlc3BvbnNlIiwicmVuZGVySXRlbXMiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==